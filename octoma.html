<!-- Standalone Generated By Octo (octo-ide.com) -->
<script>data={"program":"#######\n#\n#   OCTOMA\n#   By Cratmang\n#\n#######\n\n# This game and its material are distributed under a Creative Commons 0 \"No Rights Reserved\" license.\n\n# It is HIGHLY recommded that you play the game on LUDICROUS SPEED, otherwise the game will be far too slow.\n#  (500-1000 cycles/frame might work, but may also trigger epilepsy)\n\n# DEFAULT COLOURS (CGA 1):\n# Background  : #000000 (Black)\n# Foreground 1: #FF00FF (Fuchsia)\n# Foreground 2: #00FFFF (Cyan)\n# Blended     : #FFFFFF (White)\n# Buzzer      : #000000\n# Silence     : #000000\n\n:const DRAW_START_X 4\n:const DRAW_START_Y 4\n:calc DRAW_CENTER_X { DRAW_START_X + 24 }\n:calc DRAW_CENTER_Y { DRAW_START_Y + 24 }\n:calc DRAW_END_X { DRAW_START_X + ( 8 * 7 ) }\n:calc DRAW_END_Y { DRAW_START_Y + ( 8 * 7 ) }\n:calc DRAW_LAST_X { DRAW_END_X - 8 }\n:calc DRAW_LAST_Y { DRAW_END_Y - 8 }\n\n:calc UI_START_X { DRAW_END_X + 6 }\n:const UI_HP_Y 1\n:calc UI_STR_Y { UI_HP_Y + 7 }\n\n:const TILE_SIZE 16\n:calc TILE_HALF { TILE_SIZE / 2 }\n:const MAP_WIDTH 24\n\n###  PLAYER STATS\n\n: health 1 0 0 #Each digit is an individual byte because it makes them all easier to convert to a string and print.\n\n: healthMax 1 0 0\n\n#: healthArmIncrease 2 I was gonna do an individual value, but it's probably easier to just increase health and max health by a flat hardcoded 100.\n\n: magic 0\n\n:const magicMax 25\n\n:const magicStr 5\n\n: playerPos 5 5  # x y\n\n:const pstr 1\n\n:const pSwordStr 7\n\n: access 10\n# This is the highest ID tile that the player (and enemies) can walk through.\n# If the player gets the key from killing the Wizard, they can also walk through the locked door.\n\n: targetCo 0 0 #This is the space that the player is attacking or trying to move to.\n\n: hasSword 0\n: hasArmor 0\n\n: font\n\t0x40 0xA0 0xE0 0xA0 0xA0  0x80 0x80 0xC0 0xA0 0xC0  0x60 0x80 0x80 0x80 0x60  0xC0 0xA0 0xA0 0xA0 0xC0 # A B C D\n\t0xE0 0x80 0xE0 0x80 0xE0  0x60 0x40 0xE0 0x40 0x40  0xE0 0x80 0x80 0xA0 0xE0  0x80 0x80 0xC0 0xA0 0xA0 # E F G H\n\t0x40 0x00 0x40 0x40 0x40  0xE0 0x40 0x40 0x40 0xC0  0xA0 0xA0 0xC0 0xA0 0xA0  0x80 0x80 0x80 0x80 0xE0 # I J K L\n\t0x00 0x00 0xC0 0xA0 0xA0  0x00 0xE0 0xa0 0xE0 0x00  0xC0 0xA0 0xC0 0x80 0x80  0xE0 0xA0 0xA0 0xC0 0x20 # N O P Q\n\t0x00 0x00 0xC0 0x80 0x80  0xC0 0x80 0xC0 0x40 0xC0  0xE0 0x40 0x40 0x40 0x40  0x00 0x00 0xA0 0xA0 0xE0 # R S T U\n\t0xA0 0xA0 0xA0 0xA0 0x40  0x00 0xA0 0x40 0xA0 0x00  0xA0 0xA0 0x40 0x40 0x40  0xE0 0x20 0x40 0x80 0xE0 # V X Y Z\n\t0x40 0x40 0x40 0x00 0x40  0x00 0x00 0x00 0x00 0x40  0xC0 0x20 0x60 0x00 0x40  0x40 0xC0 0x40 0x40 0xE0 # ! . ? 1\n\t0xC0 0x20 0x60 0x80 0xE0  0xC0 0x20 0xC0 0x20 0xC0  0x20 0xA0 0xE0 0x20 0x20  0xE0 0x80 0xC0 0x20 0xC0 # 2 3 4 5\n\t0x60 0x80 0xE0 0xA0 0xE0  0xE0 0x20 0x40 0xE0 0x40  0xE0 0xA0 0x40 0xA0 0xE0  0xE0 0xA0 0xE0 0x20 0x20 # 6 7 8 9\n\t0xE0 0xA0 0xA0 0xA0 0xE0  0x00 0x40 0x00 0x40 0x00  0x40 0x80 0x80 0x80 0x40  0x40 0x20 0x20 0x20 0x40 # 0 : ( )\n\t0x20 0x40 0x40 0x80 0x80 # \\ (It's actually reversed, becauses I already use / for new line, and I can't be bothered to go change it\n\t\n# M and W are near-illegeble when they're only 3 pixels wide, so I'm seperating them from the rest of the font.\n: fontMW \n\t0xF0 0xA8 0xA8 0xA8 0xA8  0x88 0xA8 0xA8 0xA8 0x50 \n\t\n:stringmode text \"ABCDEFGHIJKLNOPQRSTUVXYZ!.?1234567890:()\\\\\" {\n\t:calc addr { font + VALUE * 5 }\n\ti := addr\n\tsprite v0 v1 5\n\tv0 += 4\n}\n:stringmode text \"MW\" {\n\t:calc addr { fontMW + VALUE * 5 }\n\ti := addr\n\tsprite v0 v1 5\n\tv0 += 6\n}\n:stringmode text \" \" { v0 += 3 }\n:stringmode text \"/\" { v1 += 7 v0 := UI_START_X }\n\n:const maxEnemies 8\n:calc enemyControlLimit { maxEnemies * 4 }\n:calc enemySpawnLimit { maxEnemies * 3 }\n\n: main\n\thires\n\t\n\t#Title Screen\n\tv0 := 26\n\tv1 := 0\n\tv2 := 8\n\ti := long title\n\tloop while v0 != 106\n\t\tplane 1 sprite v0 v1 8\n\t\ti += v2\n\t\tplane 2 sprite v0 v1 8\n\t\ti += v2\n\t\tv1 += 8\n\t\tif v1 == 64 begin\n\t\t\tv1 := 0\n\t\t\tv0 += 8\n\t\tend\n\tagain\n\t\n\tv0 := OCTO_KEY_E\n\tloop while v0 -key again\n\tplane 1 clear\n\tplane 2 clear\n\t\n\tvf := 5\n\tdelay-loop\n\t\n\t#loop #Game reset loop\n\t#Draw Frame \n\ti := long frame-corner-nw\n\tv0 := 0 v1 := 2\n\tplane 1 sprite v0 v1 2\n\tplane 2 sprite v0 v1 2\n\ti := long frame-corner-ne\n\tv0 := DRAW_END_X v1 := 2\n\tplane 1 sprite v0 v1 2\n\tplane 2 sprite v0 v1 2\n\ti := long frame-h\n\tv0 := DRAW_START_X\n\tv1 := 1\n\tloop while v0 != DRAW_END_X\n\t\tplane 1 sprite v0 v1 1\n\t\tplane 2 sprite v0 v1 1\n\t\tv0 += 8\n\tif v1 < 64 then again\n\t\n\ti := long frame-v\n\tv0 := 1\n\tv1 := DRAW_START_Y\n\tloop while v1 != DRAW_END_Y\n\t\tplane 1 sprite v0 v1 1\n\t\tplane 2 sprite v0 v1 1\n\t\tv0 := DRAW_END_X\n\t\tv0 += 2\n\t\tplane 1 sprite v0 v1 1\n\t\tplane 2 sprite v0 v1 1\n\t\tv0 := 1\n\t\tv1 += 1\n\t\tvf := 1\n\t\tdelay-loop\n\tagain\n\t\n\ti := long frame-corner-sw\n\tv0 := 0 v1 := DRAW_END_Y\n\tplane 1 sprite v0 v1 2\n\tplane 2 sprite v0 v1 2\n\ti := long frame-corner-se\n\tv0 := DRAW_END_X v1 := DRAW_END_Y\n\tplane 1 sprite v0 v1 2\n\tplane 2 sprite v0 v1 2\n\ti := long frame-h\n\tv0 := DRAW_START_X\n\tv1 := 62\n\tloop while v0 != DRAW_END_X\n\t\tplane 1 sprite v0 v1 1\n\t\tplane 2 sprite v0 v1 1\n\t\tv0 += 8\n\tif v1 < 64 then again\n\t\n\t#UI TEXT\n\tv0 := UI_START_X v2 := v0\n\tv1 := 1\n\tplane 1\n\tdraw-player-health-ui\n\tv1 := UI_STR_Y\n\tv0 := UI_START_X\n\tplane 2\n\ttext \"STR: 1\"\n\t\n\t#Draw Player sprite in center of the screen\n\t:macro drawPlayer {\n\t\ti := long playerSprite\n\t\tplane 1\n\t\tv0 := DRAW_CENTER_X \n\t\tv1 := DRAW_CENTER_Y\n\t\tsprite v0 v1 8\n\t\tv2 := TILE_HALF\n\t\ti += v2\n\t\tplane 2\n\t\tsprite v0 v1 8\n\t}\n\tdrawPlayer\n\t\n\t#Set up enemies\n\tv7 := 0\n\tv6 := 0\n\tloop while v7 != enemySpawnLimit\n\t\ti := long enemy-spawn-overworld\n\t\tspawnEnemy\n\tagain\n\t\n\ti := playerPos\n\tload v8 - v9\n\tdrawMap\n\tdrawEnemies\n\t\n\t#v3 and v4 represent the X and Y location that the player will try to access\n\tv3 := v8 v4 := v9\n\t\n\t#v7 will check to see if the player has made an input.\n\tv7 := 0 \n\tve := 0\n\t\n\t#Game start!\n\tloop\n\t\t:macro askDirection {\n\t\t\tplane 1\n\t\t\tv0 := DRAW_END_X\n\t\t\tv0 += 5\n\t\t\tv1 := 15\n\t\t\ttext \"DIRECTION?/\"\n\t\t\tv0 := DRAW_END_X\n\t\t\tv0 += 5\n\t\t\ttext \"(3) TO CANCEL\"\n\t\t}\n\t\t\n\t\t#Basic attack\n\t\tv0 := OCTO_KEY_1 if v0 key begin\n\t\t\tve := 1\n\t\t\taskDirection\n\t\tend\n\t\t\n\t\t#Magic Blast\n\t\tv0 := OCTO_KEY_2 if v0 key begin\n\t\t\n\t\tend\n\t\t\n\t\tloop\n\t\t\t#Movement/Choosing Direction\n\t\t\tv0 := OCTO_KEY_W if v0 key begin\n\t\t\t\tv4 -= 1\n\t\t\t\tv7 := 1\n\t\t\t\tif ve == 1 then ve := 2\n\t\t\tend\n\t\t\tv0 := OCTO_KEY_A if v0 key begin\n\t\t\t\tv3 -= 1\n\t\t\t\tv7 := 1\n\t\t\t\tif ve == 1 then ve := 2\n\t\t\tend\n\t\t\tv0 := OCTO_KEY_S if v0 key begin\n\t\t\t\tv4 += 1\n\t\t\t\tv7 := 1\n\t\t\t\tif ve == 1 then ve := 2\n\t\t\tend\n\t\t\tv0 := OCTO_KEY_D if v0 key begin\n\t\t\t\tv3 += 1\n\t\t\t\tv7 := 1\n\t\t\t\tif ve == 1 then ve := 2\n\t\t\tend\n\t\t\tv0 := OCTO_KEY_Q if v0 key begin\n\t\t\t\t#No movement\n\t\t\t\tif ve != 1 then v7 := 1\n\t\t\tend\n\t\t\t\n\t\t\tif ve == 1 begin\n\t\t\t\tv0 := OCTO_KEY_3 if v0 key begin\n\t\t\t\t\tve := 0\n\t\t\t\t\taskDirection\n\t\t\t\tend\n\t\t\tend\n\t\t\t\n\t\t\tif ve == 2 begin\n\t\t\t\taskDirection\n\t\t\t\tve := 0\n\t\t\t\tV7 := 2\n\t\t\tend\n\t\tif ve != 0 then again\n\t\t\n\t\t\n    if v7 != 0 begin\n\t\t\t#Input recieved. Now to see if it's a valid move...\n\t\t\tva := v3 vb := v4 vc := 0\n\t\t\t# Check collision for movement\n\t\t\tif v7 == 1 then checkCollision\n\t\t\t#If attacking, check if any enemies are on the square we attacked.\n\t\t\tif v7 == 2 begin\n\t\t\t\tvd := 0\n\t\t\tend\n\t\t\t\n\t\t\tif vd != 2 begin\n\n\t\t\t\ti := playerPos\n\t\t\t\tload v8 - v9\n\t\t\t\tva := v3 vb := v4\n\t\t\t\ti := targetCo\n\t\t\t\tsave va - vb\n\t\t\t\tdrawMap\n\t\t\t\tdrawEnemies\n\t\t\t\t\n\t\t\t\t#Moving\n\t\t\t\tif v7 == 1 begin \n\t\t\t\t\ti := targetCo\n\t\t\t\t\tload v8 - v9\n\t\t\t\t\tva := v8 vb := v9\n\t\t\t\t\t#Moving between areas, and spawning enemies\n\t\t\t\t\tgetTileID\n\t\t\t\t\tif ve == 5 begin #Entering Dungeon\n\t\t\t\t\t\tv7 := 0\n\t\t\t\t\t\tv6 := 0\n\t\t\t\t\t\tif v9 == 3 begin #Entering Daiouika Castle\n\t\t\t\t\t\t\tv8 := 12\n\t\t\t\t\t\t\tv9 := 81\n\t\t\t\t\t\t\tloop while v7 != enemySpawnLimit\n\t\t\t\t\t\t\t\ti := long enemy-spawn-castle\n\t\t\t\t\t\t\t\tspawnEnemy\n\t\t\t\t\t\t\tagain\n\t\t\t\t\t\tend \n\t\t\t\t\t\tif v9 == 5 begin #Entering the Lost Caves\n\t\t\t\t\t\t\tv8 := 12\n\t\t\t\t\t\t\tv9 := 55\n\t\t\t\t\t\t\tloop while v7 != enemySpawnLimit\n\t\t\t\t\t\t\t\ti := long enemy-spawn-cave\n\t\t\t\t\t\t\t\tspawnEnemy\n\t\t\t\t\t\t\tagain\n\t\t\t\t\t\tend \n\t\t\t\t\t\tif v9 == 13 begin #Entering Temple 8\n\t\t\t\t\t\t\tv8 := 12\n\t\t\t\t\t\t\tv9 := 25\n\t\t\t\t\t\t\tloop while v7 != enemySpawnLimit\n\t\t\t\t\t\t\t\ti := long enemy-spawn-temple\n\t\t\t\t\t\t\t\tspawnEnemy\n\t\t\t\t\t\t\tagain\n\t\t\t\t\t\tend \n\t\t\t\t\tend \n\t\t\t\t\tif ve == 6 begin #Exiting Dungeon\n\t\t\t\t\t\tv7 := 0\n\t\t\t\t\t\tv6 := 0\n\t\t\t\t\t\tloop while v7 != enemySpawnLimit\n\t\t\t\t\t\t\ti := long enemy-spawn-overworld\n\t\t\t\t\t\t\tspawnEnemy\n\t\t\t\t\t\tagain\n\t\t\t\t\t\tif v9 == 81 begin #Daiouika Castle\n\t\t\t\t\t\t\tv8 := 12\n\t\t\t\t\t\t\tv9 := 4\n\t\t\t\t\t\tend \n\t\t\t\t\t\tif v9 == 55 begin #Lost Caves\n\t\t\t\t\t\t\tv8 := 19\n\t\t\t\t\t\t\tv9 := 5\n\t\t\t\t\t\tend \n\t\t\t\t\t\tif v9 == 25 begin #Temple 8\n\t\t\t\t\t\t\tv8 := 11\n\t\t\t\t\t\t\tv9 := 13\n\t\t\t\t\t\tend \n\t\t\t\t\tend\n\n\t\t\t\t\ti := playerPos\n\t\t\t\t\tsave v8 - v9\n\t\t\t\t\t#if v7 := 0\n\t\t\t\t\tv7 := 0\n\t\t\t\tend\n\t\t\t\t\n\t\t\t\tdrawMap\n\t\t\t\t\n\t\t\t\t#Basic Attack\n\t\t\t\tif v7 == 2 begin\n\t\t\t\t\tv7 := 0\n\t\t\t\t\ti := targetCo\n\t\t\t\t\tload va - vb\n\t\t\t\t\tloop\n\t\t\t\t\t\ti := enemies\n\t\t\t\t\t\ti += v7\n\t\t\t\t\t\t\n\t\t\t\t\t\tload v3 \n\t\t\t\t\t\tif v1 == vb begin if v0 == va begin #If an enemy is in this location, that enemy gets attacked\n\t\t\t\t\t\t\t#Temporary pass off\n\t\t\t\t\t\t\tv8 := v2\n\t\t\t\t\t\t\tv9 := v3\n\t\t\t\t\t\t\tdrawEnemies\n\t\t\t\t\t\t\ti := targetCo\n\t\t\t\t\t\t\tload va - vb\n\t\t\t\t\t\t\tv2 := v8 \n\t\t\t\t\t\t\tv3 := v9\n\t\t\t\t\t\t\ti := playerPos\n\t\t\t\t\t\t\tload v8 - v9\n\t\t\t\t\t\t\t#Brief animation that shows the player \"attacking\" the enemy\n\t\t\t\t\t\t\tv5 := va\n\t\t\t\t\t\t\tv5 -= v8 #v8 and v9 should still be holding the player position\n\t\t\t\t\t\t\tv5 += 3 #Raises v0 above \"negative\" value\n\t\t\t\t\t\t\tv5 += v5 #2\n\t\t\t\t\t\t\tv5 += v5 #4\n\t\t\t\t\t\t\tv5 += v5 #8\n\t\t\t\t\t\t\tv5 += DRAW_START_X #Offset\n\t\t\t\t\t\t\tv6 := vb\n\t\t\t\t\t\t\tv6 -= v9\n\t\t\t\t\t\t\tv6 += 3\n\t\t\t\t\t\t\tv6 += v6\n\t\t\t\t\t\t\tv6 += v6\n\t\t\t\t\t\t\tv6 += v6\n\t\t\t\t\t\t\tv6 += DRAW_START_Y\n\t\t\t\t\t\t\ti :=  long hurtBox\n\t\t\t\t\t\t\tplane 1\n\t\t\t\t\t\t\tsprite v5 v6 8\n\t\t\t\t\t\t\t#PLAY THE SOUND OF THEIR PAIN\n\t\t\t\t\t\t\ti := long audio-hit\n\t\t\t\t\t\t\tvc := 40 vd := 15\n\t\t\t\t\t\t\tpitch := vc\n\t\t\t\t\t\t\taudio buzzer := vd\n\t\t\t\t\t\t\tvf := 9\n\t\t\t\t\t\t\tdelay-loop\n\t\t\t\t\t\t\t#Erase the animation\n\t\t\t\t\t\t\ti :=  long hurtBox\n\t\t\t\t\t\t\tsprite v5 v6 8\n\t\t\t\t\t\t\tv8 := v2\n\t\t\t\t\t\t\tv9 := v3\n\t\t\t\t\t\t\tdrawEnemies\n\t\t\t\t\t\t\ti := targetCo\n\t\t\t\t\t\t\tload v1\n\t\t\t\t\t\t\tload va - vb\n\t\t\t\t\t\t\tv2 := v8 \n\t\t\t\t\t\t\tv3 := v9\n\t\t\t\t\t\t\ti := playerPos\n\t\t\t\t\t\t\tload v8 - v9\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\ti := hasSword\n\t\t\t\t\t\t\tload vf - vf\n\t\t\t\t\t\t\tif vf == 1 begin v4 := pSwordStr else v4 := pstr end\n\t\t\t\t\t\t\tv3 -= v4\n\t\t\t\t\t\t\tif v3 > 100 begin #When a number goes below 0, it rolls over to 255. There's no way we'll deal enough damage to roll all the way down to 100, but better safe than sorry.\n\t\t\t\t\t\t\t\t#Anyways, this enemy is dead now. Time for loot!\n\t\t\t\t\t\t\t\t:macro heal {\n\t\t\t\t\t\t\t\t\t#TO-DO\n\t\t\t\t\t\t\t\t\tplane 1\n\t\t\t\t\t\t\t\t\tdraw-player-health-ui\n\t\t\t\t\t\t\t\t\ti := health\n\t\t\t\t\t\t\t\t\tload v2\n\t\t\t\t\t\t\t\t\tv2 += vc\n\t\t\t\t\t\t\t\t\tif v2 > 9 begin v2 -= 10 v1 += 1 end\n\t\t\t\t\t\t\t\t\tv1 += vd\n\t\t\t\t\t\t\t\t\tif v1 > 9 begin v1 -= 10 v0 += 1 end\n\t\t\t\t\t\t\t\t\ti := healthMax\n\t\t\t\t\t\t\t\t\tload vf - vf\n\t\t\t\t\t\t\t\t\tif v0 == vf then load v2\n\t\t\t\t\t\t\t\t\ti := health\n\t\t\t\t\t\t\t\t\tsave v2\t\t\n\t\t\t\t\t\t\t\t\tdraw-player-health-ui\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\tif v2 == 1 begin #Shrimp - miniscule EXP, and some health back!\n\t\t\t\t\t\t\t\t\tvd := 0 vc := 2\n\t\t\t\t\t\t\t\t\theal\n\t\t\t\t\t\t\t\tend\n\t\t\t\t\t\t\t\tif v2 == 2 begin #Lobster -\n\t\t\t\t\t\t\t\t\tvd := 0 vc := 4\n\t\t\t\t\t\t\t\t\theal\n\t\t\t\t\t\t\t\tend\n\t\t\t\t\t\t\t\tif v2 == 3 begin #Waterbear\n\t\t\t\t\t\t\t\t\tvd := 0 vc := 7\n\t\t\t\t\t\t\t\t\theal\n\t\t\t\t\t\t\t\tend\n\t\t\t\t\t\t\t\tif v2 == 4 begin #Skull - Lots of EXP\n\t\t\t\t\t\t\t\t\tvd := 0 vc := 1\n\t\t\t\t\t\t\t\t\theal\n\t\t\t\t\t\t\t\tend\n\t\t\t\t\t\t\t\tif v2 == 5 begin #Squid\n\t\t\t\t\t\t\t\t\tvd := 1 vc := 0\n\t\t\t\t\t\t\t\t\theal\n\t\t\t\t\t\t\t\tend\n\t\t\t\t\t\t\t\tif v2 == 6 begin #If this was THE wizard, turn the tile that he was standing on into a chest (it will contain the key!)\n\t\t\t\t\t\t\t\t\tvd := 2 vd := 5\n\t\t\t\t\t\t\t\t\theal\n\t\t\t\t\t\t\t\t\tdrawMap\n\t\t\t\t\t\t\t\t\ti := targetCo\n\t\t\t\t\t\t\t\t\tload va - vb\n\t\t\t\t\t\t\t\t\tgetTileID\n\t\t\t\t\t\t\t\t\tve := 9\n\t\t\t\t\t\t\t\t\tsave ve - ve\n\t\t\t\t\t\t\t\t\tdrawMap\n\t\t\t\t\t\t\t\t\t#i := targetCo\n\t\t\t\t\t\t\t\t\t#load v1\n\t\t\t\t\t\t\t\tend\n\t\t\t\t\t\t\t\t#Set enemy to NOTHING\n\t\t\t\t\t\t\t\tv0 := 0\n\t\t\t\t\t\t\t\tv1 := 0\n\t\t\t\t\t\t\t\tv2 := 0\n\t\t\t\t\t\t\tend\n\t\t\t\t\t\t\ti := enemies\n\t\t\t\t\t\t\ti += v7\n\t\t\t\t\t\t\tsave v3\n\t\t\t\t\t\t\tv7 := enemyControlLimit\n\t\t\t\t\t\t\tv7 -= 4\n\t\t\t\t\t\tend end\n\t\t\t\t\t\tv7 += 4\n\t\t\t\t\tif v7 != enemyControlLimit then again\n\t\t\t\t\tv7 := 0\n\t\t\t\tend \n\n\t\t\t\t#Enemy movement\n\t\t\t\t# Loop through each enemy\n\t\t\t\t#  Check where the player is\n\t\t\t\t#  Move toward the player\n\t\t\t\t#    Movement needs to account for walls\n\t\t\t\tloop\n\t\t\t\t\ti := enemies\n\t\t\t\t\ti += v7\n\t\t\t\t\tload va - vc\n\t\t\t\t\tif vc != 0 begin\n\t\t\t\t\t\tload v3 - v4\n\t\t\t\t\t\tv4 -= v9\n\t\t\t\t\t\tv4 += 5\n\t\t\t\t\t\tif v4 < 10 begin\n\t\t\t\t\t\t\tv3 -= v8\n\t\t\t\t\t\t\tv3 += 5\n\t\t\t\t\t\t\tif v3 < 10 begin\t\t\t\n\n\t\t\t\t\t\t\t\tif v4 > 5 begin\n\t\t\t\t\t\t\t\t\tvb -= 1\n\t\t\t\t\t\t\t\t\tcheckCollision\n\t\t\t\t\t\t\t\t\tif vd == 2 then vb += 1\n\t\t\t\t\t\t\t\tend\n\t\t\t\t\t\t\t\tif v4 < 5 begin\n\t\t\t\t\t\t\t\t\tvb += 1\n\t\t\t\t\t\t\t\t\tcheckCollision\n\t\t\t\t\t\t\t\t\tif vd == 2 then vb -= 1\n\t\t\t\t\t\t\t\tend\n\t\t\t\t\t\t\t\tif v3 > 5 begin\n\t\t\t\t\t\t\t\t\tva -= 1\n\t\t\t\t\t\t\t\t\tcheckCollision\n\t\t\t\t\t\t\t\t\tif vd == 2 then va += 1\n\t\t\t\t\t\t\t\tend\n\t\t\t\t\t\t\t\tif v3 < 5 begin\n\t\t\t\t\t\t\t\t\tva += 1\n\t\t\t\t\t\t\t\t\tcheckCollision\n\t\t\t\t\t\t\t\t\tif vd == 2 then va -= 1\n\t\t\t\t\t\t\t\tend\n\t\t\t\t\t\t\t\ti := enemies\n\t\t\t\t\t\t\t\ti += v7 \n\t\t\t\t\t\t\t\tsave va - vb\n\n\t\t\t\t\tend end end\n\n\t\t\t\t\tv7 += 4\n\t\t\t\tif v7 != enemyControlLimit then again\n\t\t\t\t\n\t\t\t\tdrawEnemies\n\t\t\t\ti := long audio-step\n\t\t\t\tv2 := 3\n\t\t\t\tv1 := 34 pitch := v1\n\t\t\t\taudio buzzer := v2\n\n\t\t\t\tva := v8 vb := v9\n\t\t\t\tgetTileID\n\t\t\t\tif ve == 9 begin # We found treasure!\n\n\t\t\t\t\t# Convert chest into opened chest.\n\t\t\t\t\tve := 10\n\t\t\t\t\tsave ve - ve\n\n\t\t\t\t\t# Get loot dropped\n\t\t\t\t\tif v9 == 33 begin\n\t\t\t\t\t\t#Got the sword!\n\t\t\t\t\t\tv0 := UI_START_X v0 += 19\n\t\t\t\t\t\tv1 := UI_STR_Y\n\t\t\t\t\t\tplane 2 text \"1\"\n\t\t\t\t\t\tv0 -= 4\n\t\t\t\t\t\ttext \"7\"\n\t\t\t\t\t\ti := hasSword\n\t\t\t\t\t\tvf := 1\n\t\t\t\t\t\tsave vf - vf\n\t\t\t\t\t\ti := long swordSprite\n\t\t\t\t\t\tv1 := 50\n\t\t\t\t\t\tv0 := 66\n\t\t\t\t\t\tplane 1 sprite v0 v1 10\n\t\t\t\t\t\tv2 := 10 i += v2\n\t\t\t\t\t\tplane 2 sprite v0 v1 10\n\t\t\t\t\tend\n\t\t\t\t\tif v9 == 46 begin\n\t\t\t\t\t\t#Got the armor!\n\t\t\t\t\t\tplane 1\n\t\t\t\t\t\tdraw-player-health-ui\n\t\t\t\t\t\t#Increase health and max health, then set has armor to true\n\t\t\t\t\t\t\n\t\t\t\t\t\ti := health\n\t\t\t\t\t\tload v0\n\t\t\t\t\t\tv0 += 1\n\t\t\t\t\t\tsave v0\n\t\t\t\t\t\ti := healthMax\n\t\t\t\t\t\tload v0\n\t\t\t\t\t\tv0 += 1 \n\t\t\t\t\t\tsave v0\n\t\t\t\t\t\ti := hasArmor\n\t\t\t\t\t\tv0 := 1\n\t\t\t\t\t\tsave v0\n\t\t\t\t\t\tdraw-player-health-ui\n\t\t\t\t\t\t\n\t\t\t\t\t\tv1 := 50\n\t\t\t\t\t\ti := long armourSprite\n\t\t\t\t\t\tv0 := 75\n\t\t\t\t\t\tplane 1 sprite v0 v1 8\n\t\t\t\t\t\tv2 := 8 i += v2\n\t\t\t\t\t\tplane 2 sprite v0 v1 8\n\t\t\t\t\tend\n\t\t\t\t\tif v9 > 58 begin\n\t\t\t\t\t\t#Got the key from killing the wizard!\n\t\t\t\t\t\tdrawMap\n\t\t\t\t\t\ti := long keySprite\n\t\t\t\t\t\tv1 := 50\n\t\t\t\t\t\tv0 := 84\n\t\t\t\t\t\tv1 := 50\n\t\t\t\t\t\tplane 1 sprite v0 v1 9\n\t\t\t\t\t\tv2 := 9 i += v2\n\t\t\t\t\t\tplane 2 sprite v0 v1 9\n\t\t\t\t\t\ti := access\n\t\t\t\t\t\tload v0\n\t\t\t\t\t\tv0 += 1\n\t\t\t\t\t\tsave v0\n\t\t\t\t\t\tdrawMap\n\t\t\t\t\tend\n\n\t\t\t\t\t#Play victory jingle!\n\t\t\t\t\ti := long audio-note\n\t\t\t\t\tv1 := 96 v2 := 12\n\t\t\t\t\tpitch := v1\n\t\t\t\t\taudio buzzer := v2\n\t\t\t\t\tvf := 7\n\t\t\t\t\tdelay-loop\n\t\t\t\t\tv1 := 120\n\t\t\t\t\tpitch := v1\n\t\t\t\t\taudio buzzer := v2\n\t\t\t\t\tve := 0\n\t\t\t\tend\n\t\t\t\t\n\t\t\tend\n\t\t\tv3 := v8 v4 := v9\n\t\t\tv7 := 1\n\t\t\t\n\t\t\t#Delay to prevent the player from just ZOOMING across the map\n\t\t\t# Copied from the default Octo example project. I only barely understand how it works.\n\t\t\tif ve == 8 begin vf := 60\n\t\t\telse vf := 14 end\n\t\t\tdelay-loop\n\t\t\tv7 := 0\n\t\t\tif ve != 8 then ve := 0\n\t\tend\n\t\t\n\t if ve != 8 then again\n\t \n\t #VICTORY! WE FOUND THE PRINCESS! Draw the Quest Complete screen.\n\t drawMap\n\t drawEnemies\n\t drawPlayer\n\t v0 := DRAW_START_X\n\t v1 := DRAW_START_Y\n\t v2 := TILE_HALF\n\t # SWORD\n\t i := long vic-sword #TO-DO: condition for if the player has the sacred sword or not\n\t loop\n\t \tplane 1 sprite v0 v1 8\n\t\ti += v2\n\t\tplane 2 sprite v0 v1 8\n\t\ti += v2\n\t\tv1 += 8\n\t if v1 != DRAW_LAST_Y then again\n\t # PLAYER\n\t #TO-DO: condition for if the player has the sacred armor or not\n\t v3 := 0\n\t i := long vic-player\n\t loop\n\t \tv1 := DRAW_START_Y\n\t\tv0 += 8\n\t\tloop\n\t\t\tplane 1 sprite v0 v1 8\n\t\t\ti += v2\n\t\t\tplane 2 sprite v0 v1 8\n\t\t\ti += v2\n\t\t\tv1 += 8\n\t \tif v1 != DRAW_LAST_Y then again\n\t \tv3 += 1\n\t if v3 != 3 then again\n\t # PRINCESS\n\t i := long vic-princess\n\t v0 += 8\n\t loop\n\t \tv1 := DRAW_START_Y\n\t\tloop\n\t\t\tplane 1 sprite v0 v1 8\n\t\t\ti += v2\n\t\t\tplane 2 sprite v0 v1 8\n\t\t\ti += v2\n\t\t\tv1 += 8\n\t \tif v1 != DRAW_LAST_Y then again\n\t\tv0 += 8\n\t if v0 != DRAW_END_X then again\n\t #QUEST COMPLETE TEXT\n\t i := long vic-quest-complete-text\n\t v0 := DRAW_START_X\n\t loop\n\t \tplane 1 sprite v0 v1 8\n\t\ti += v2\n\t\tplane 2 sprite v0 v1 8\n\t\ti += v2\n\t\tv0 += 8\n\t if v0 != DRAW_END_X then again\n\t please-play-again\n\n: spawnEnemy\n\t#Assumes that i is already set to the list of enemies to spawn, otherwise we're gonna have a problem.\n\t#Load\n\ti += v7\n\tload v2 # X, Y, and ID\n\t\n\ti := bestiary\n\ti += v2 i += v2\n\tload v3 - v4 #Attack and health\n\t\n\ti := enemies\n\ti += v6\n\tsave v4\n\t\n\t#  Next spawn, or trigger exit loop\n\tv7 += 3\n\tv6 += 4\n;\n\n: getTileID\n# Gets the ID of a tile on the map, determined by va (X) and vb (Y), and then loads it to ve.\n\t\n\tvd := vb\n\tif vb > 58 begin #The map is cut into sections \n\t\ti := long map-castle\n\t\tvd -= 59\n\telse if vb > 40 begin\n\t\ti := long map-cave\n\t\tvd -= 41\n\telse if vb > 18 begin\n\t\ti := long map-temple\n\t\tvd -= 19\n\telse\n\t\ti := long map-world\n\tend end end\n\t\n\tvd += vd # 2\n\tvd += vd # 4\n\tvd += vd # 8, if we go higher, we risk hitting an interger overflow\n\ti  += vd #  ... So let's just start pumping it into the i register\n\ti  += vd # 16\n\ti  += vd # 24! This is the row we want.\n\ti += va # Add in the X value, and we find the ID we're looking for.\n\t\n\tload ve - ve\n;\n\n: checkCollision\n\t#Check if tile is walkable (Unless the enemy we're moving is a Skull)\n\tgetTileID\n\ti := access load v5 - v5\n\tvd := 0\n\t#Skulls ignore walls\n\tif vc == 4 then ve := 0\n\tif ve <= v5 begin\n\t\n\t#Check if enemy is standing on tile\n\t\tve := 0\n\t\tloop \n\t\t\ti := enemies\n\t\t\ti += ve\n\t\t\tload v5 - v6\n\t\t\t\n\t\t\t#va and vb SHOULD have the coordinates of the tile we're checking\n\t\t\tif va == v5 then vd += 1\n\t\t\tif vb == v6 then vd += 1\n\t\t\tif vd != 2 then vd := 0\n\t\t\t\n\t\t\tif vd == 2 begin ve := enemyControlLimit ve -= 4 end # Get us out of the loop! There is an enemy here!\n\t\t\tve += 4\n\t\tif ve != enemyControlLimit then again\n\t\t\n\t\t#Check if player is standing on tile (If we're checking for enemy movement)\n\t\tif vc != 0 begin if vd != 2 begin\n\t\t\ti := playerPos\n\t\t\tload v8 - v9\n\t\t\tif va == v8 then vd += 1\n\t\t\tif vb == v9 then vd += 1\n\t\t\tif vd != 2 then vd := 0\n\t\t\t#The player is here! Attack!\n\t\t\tif vd == 2 begin\n\t\t\t\ti := bestiary\n\t\t\t\ti += vc \n\t\t\t\ti += vc #Get the ID of the enemy we want\n\t\t\t\tvf := 1\n\t\t\t\ti += vf #We want that monster's strength\n\t\t\t\tload ve - ve\n\t\t\t\t#Check if the player has the armor, and then reduce the attack power of the enemy's attack if they do\n\t\t\t\ti := hasArmor load vf - vf\n\t\t\t\tif vf == 1 begin\n\t\t\t\t\tve -= 10\n\t\t\t\t\tif ve > 200 then ve := 0\n\t\t\t\tend\n\t\t\t\t#NOW TO DEAL THE DAMAGE!\n\t\t\t\tplane 1\n\t\t\t\tdraw-player-health-ui\n\t\t\t\ti := health\n\t\t\t\tload v2\n\t\t\t\tif ve > 9 begin ve -= 10 v1 -= 1 end\n\t\t\t\tv2 -= ve\n\t\t\t\tif v2 > 200 begin #ROLLOVER! We lost a ten. \n\t\t\t\t\tv2 += 10 \n\t\t\t\t\tv1 -= 1 \n\t\t\t\t\tif v1 > 200 begin\n\t\t\t\t\t\tv1 := 9\n\t\t\t\t\t\tv0 -= 1\n\t\t\t\t\t\tif v0 > 200 begin\n\t\t\t\t\t\t\t#... I think we're straight up dead now.\n\t\t\t\t\t\t\tv0 := 0\n\t\t\t\t\t\t\tv1 := 0\n\t\t\t\t\t\t\tv2 := 0\n\t\t\t\tend end end\n\t\t\t\tsave v2\n\t\t\t\tif v0 == 0 begin if v1 == 0 begin if v2 == 0 begin draw-player-health-ui gameOver end end end\n\t\t\t\tdraw-player-health-ui\n\t\t\t\t#\"Animation\"\n\t\t\t\tplane 2 draw-player-health-ui\n\t\t\t\ti := long audio-hurt\n\t\t\t\tv1 := 64 v2 := 15\n\t\t\t\tpitch := v1\n\t\t\t\taudio buzzer := v2\n\t \t\t\tdrawEnemies\n\t\t\t\tv0 := DRAW_CENTER_X\n\t\t\t\tv1 := DRAW_CENTER_Y\n\t\t\t\tplane 1 i := long hurtBox\n\t\t\t\tsprite v0 v1 8\n\t\t\t\tvf := 9\n\t\t\t\tdelay-loop\n\t\t\t\tdrawEnemies\n\t\t\t\tv0 := DRAW_CENTER_X\n\t\t\t\tv1 := DRAW_CENTER_Y\n\t\t\t\tplane 1 i := long hurtBox\n\t\t\t\tsprite v0 v1 8\n\t\t\t\tplane 2 draw-player-health-ui\n\t\t\t\tvd := 2\n\t\t\tend\n\t\tend end\n\t\t\n\telse\n\t\tvd := 2\n\tend\n;\n\n: drawEnemies\n\t#Erase/redraw tiles that enemies are standing on\n\t#We might erase the above code and implement drawing enemies into this\n\tv5 := 0\n\tloop\n\t\ti := playerPos\n\t\tload va - vb\n\t\ti := enemies\n\t\ti += v5\n\t\tload v2\n\t\tv0 -= va \n\t\tv0 += 3 #Raises v0 above \"negative\" value\n\t\tif v0 < 7 begin #If the enemy is within the field of view\n\t\t\tv0 += v0 #2\n\t\t\tv0 += v0 #4\n\t\t\tv0 += v0 #8\n\t\t\tv0 += DRAW_START_X #Offset\n\t\t\tv1 -= vb\n\t\t\tv1 += 3\n\t\t\tif v1 < 7 begin\n\t\t\t\tv1 += v1\n\t\t\t\tv1 += v1\n\t\t\t\tv1 += v1\n\t\t\t\tv1 += DRAW_START_Y\n\t\t\t\tload va - vb\n\t\t\t\tdrawTile #Erase tile\n\t\t\t\t\n\t\t\t\t#Now draw enemy\n\t\t\t\ti := long enemiesSprites \n\t\t\t\tv2 -= 1\n\t\t\t\tv2 += v2 #Enemy ID * 2\n\t\t\t\tv2 += v2 # * 4\n\t\t\t\tv2 += v2 # * 8\n\t\t\t\tv2 += v2 # * 16\n\t\t\t\ti += v2\n\t\t\t\tplane 1 sprite v0 v1 8\n\t\t\t\tv2 := 8 i += v2\n\t\t\t\tplane 2 sprite v0 v1 8\n\t\t\t\t\n\t\tend end\n\t\tv5  += 4\n\tif v5 != enemyControlLimit then again\n;\n\n### DRAW MAP AND TILES\n\n: drawMap\n\tv0 := DRAW_START_X  v1 := DRAW_START_Y\n\ti := playerPos\n\tload va - vb\n\tva -= 3\tvb -= 3\n\t\n\tv2 := 0\n\t\n\tloop if v1 != DRAW_END_Y begin\n\t\tloop if v0 != DRAW_END_X begin\n\t\t\t\n\t\t\tif vb == v9 then v2 += 1 #These two ifs are a catch to make sure we don't draw on the same tile as a player\n\t\t\tif va == v8 then v2 += 1 #We'll need to do something for enemies later\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t# Or adjust the tiles completely\n\t\t\t\n\t\t\tif v2 != 2 then drawTile\n\t\t\tv2 := 0\n\t\t\t\n\t\t\tva += 1\n\t\t\tv0 += 8\n\t\t\tagain\n\t\tend\n\t\tv0 := DRAW_START_X\n\t\tva -= 7\n\t\tvb += 1\n\t\tv1 += 8\n\t\tagain\n\tend\n;\n\n: drawTile\n\t#v0 =screen X, v1 = screen Y, va = X, vb = Y, vc = 25 (Width of the map), vd\n\tgetTileID\n\t\n\t#Just one caveat - if this is the locked door, and the player has the key, we need to show that the door is open!\n\tif ve == 11 begin\n\t\ti := access\n\t\tload vc - vc\n\t\tif vc == 11 then ve := 4\n\tend\n\t\n\ti := long tileset\n\tve += ve #2\n\tve += ve #4\n\ti += ve\n\ti += ve # 8\n\ti += ve\n\ti += ve # 16\n\t\n\tplane 1 sprite v0 v1 8 \n\tvc := TILE_HALF i += vc\n\tplane 2 sprite v0 v1 8 \n;\n\n: gameOver\n\t\n\t# Draw player being dead\n\tdrawEnemies\n\tdrawPlayer\n\t:macro drawPlayerDead {\n\t\ti := long playerSprite_dead\n\t\tplane 1\n\t\tv0 := DRAW_CENTER_X \n\t\tv1 := DRAW_CENTER_Y\n\t\tsprite v0 v1 8\n\t\tv2 := 8\n\t\ti += v2\n\t\tplane 2\n\t\tsprite v0 v1 8\n\t}\n\tdrawPlayerDead\n\tvf := 100\n\tdelay-loop\n\tdrawPlayerDead\n\t\n\t# Erase map and enemies\n\tdrawMap\n\tdrawEnemies\n\t\n\ti := long gameover-image\n\tv0 := DRAW_START_X\n\tv0 += 8\n\tv2 := TILE_HALF\n\tloop\n\t\tv1 += 8\n\t\tv1 := DRAW_START_Y\n\t\tloop\n\t\t\tplane 1 sprite v0 v1 8\n\t\t\ti += v2\n\t\t\tplane 2 sprite v0 v1 8\n\t\t\ti += v2\n\t\t\tv1 += 8\n\t\tif v1 != DRAW_LAST_Y then again\n\t\tv0 += 8\n\tif v0 != DRAW_LAST_X then again\n\t\n\ti := long gameover-text\n\tv0 := DRAW_START_X\n\tloop\n\t\tplane 1 sprite v0 v1 8\n\t\ti += v2\n\t\tplane 2 sprite v0 v1 8\n\t\ti += v2\n\t\tv0 += 8\n\tif v0 != DRAW_END_X then again\n\t\n\tplease-play-again\n\n: please-play-again\n\t:macro write_pleaseReset {\n\t\tv0 := DRAW_END_X\n\t\tv0 += 5\n\t\tv1 := 30\n\t\ttext \"PLEASE RESET/\"\n\t\tv0 := DRAW_END_X\n\t\tv0 += 5\n\t\ttext \"TO PLAY AGAIN\"\n\t}\n\t\n\tplane 1\n\twrite_pleaseReset\n\t\n\tplane 2\n\t#Write just the first line. This will make the two lines flash alternately.\n\tv0 := DRAW_END_X\n\tv0 += 5\n\tv1 := 30\n\ttext \"PLEASE RESET/\"\n\tloop\n\tvf := 7\n\tdelay-loop\n\twrite_pleaseReset again\n\t#INFINITE LOOP. This is easier than coding a reset into the game.\n\t\n: delay-loop\n\tdelay := vf\n\tloop\n\t\tvf := delay\n\t\tif vf != 0 then\n\tagain\n;\n\n: draw-player-health-ui\n\tv0 := DRAW_END_X v0 += 6\n\tv1 := 1\n\ttext \"HP:\"\n\t# Draw Current Health\n\ti := health\n\tload v2 - v2 number-to-string\n\ti := health i += v1 #HOLY SUGAR WAY TO REUSE REGISTERS I AM A GENIUS\n\tload v2 - v2 number-to-string\n\ti := health i += v1 i += v1\n\tload v2 - v2 number-to-string\n\ttext \"\\\\\"\n\ti := healthMax\n\tload v2 - v2 number-to-string\n\ti := healthMax i += v1 \n\tload v2 - v2 number-to-string\n\ti := healthMax i += v1 i += v1\n\tload v2 - v2 number-to-string\n;\n\n: number-to-string #Uses vf, plus v0 and v1 for drawing the numbers\n\tif v2 == 0 begin text \"0\" end # I wanted to use if then, but for some reason, it causes the text command to\n\tif v2 == 1 begin text \"1\" end #  write the nuumber multiple times. if begin end doesn't cause this, and I have\n\tif v2 == 2 begin text \"2\" end #  absolutely no idea why.\n\tif v2 == 3 begin text \"3\" end\n\tif v2 == 4 begin text \"4\" end\n\tif v2 == 5 begin text \"5\" end \n\tif v2 == 6 begin text \"6\" end\n\tif v2 == 7 begin text \"7\" end\n\tif v2 == 8 begin text \"8\" end\n\tif v2 == 9 begin text \"9\" end\n\t#It occours to me that vf changes based on factors I do not fully understand. We'll see if drawing with text causes weird stuff to happen\n;\n\n\n\n### ENEMY STATS\n: enemies\n#X  Y  ID HP\n 0  0  0  0  # 0  / 1\n 0  0  0  0  # 5  / 2\n 0  0  0  0  # 10 / 3\n 0  0  0  0  # 15 / 4\n 0  0  0  0  # 20 / 5\n 0  0  0  0  # 25 / 6\n 0  0  0  0  # 30 / 7\n 0  0  0  0  # 35 / 8\n\n: bestiary\n#Example Entry: 3 HP, 5 Strength\n#Note that \"0\" actually translates to 1 health - the enemy will count as \"dead\" when its health rolls to 255.\n\n#0 = Dead or non-existant\n0 0\n\n#1 = Shrimp\n0 1\n\n#2 = Lobster\n2 2\n\n#3 = Waterbear\n15 5\n\n#4 = Skull\n1 15\n\n#5 = Squid\n10 12\n\n#6 = Wizard\n30 17\n\n\n### WORLD MAP\n\n: map-world\n# x>   2 (The player may not pass this point)                     22      y\n#      |                                                          |       v\n13 13 13 13 13 13 13 13 13 13 13 13 13 13 13 13 31 31 31 31 31 31 31 31 \n13 13 13 13 13 13 13 13 13 13 19 20 21 22 23 13 31 31 31 31 31 31 31 31 \n13 13 13 13 28 28 28 13 13 15 24 25 15 26 27 15 31 31 31 31 31 31 31 31 \n#------|----------------------------------------------------------|------- 2 (The above spacing is to ensure we don't have to render parts of the map that don't exist)\n13 13 13 28 1  1  1  13 13 14 1  15 5  15 1  14 31 31 31 31 31 31 31 31 \n13 13 13 1  1  30 1  13 13 29 15 14 2  14 15 29 31 31 31 31 31 31 31 31 \n13 13 13 1  1  2  1  28 28 13 29 29 3  29 29 13 31 31 31 5  31 31 31 31 \n13 13 13 1  1  2  1  1  1  13 13 28 3  28 28 28 31 2  2  2  2  2  31 31 \n13 13 13 1  1  2  2  1  1  13 13 1  2  1  1  1  31 2  29 29 1  2  31 31\n13 13 13 1  1  1  2  1  1  28 13 1  2  2  2  2  2  2  31 31 29 2  31 31 \n13 13 13 29 1  1  2  1  1  1  13 29 29 29 29 1  7  7  7  7  7  2  13 13\n13 13 13 13 1  1  2  1  1  1  28 31 31 31 31 31 29 7  7  7  7  2  13 13 \n13 13 13 13 1  1  2  1  1  2  2  2  2  2  1  1  7  7  7  7  1  2  13 13 \n13 13 13 13 1  1  2  1  1  2  16 17 18 2  1  1  1  1  1  1  1  2  13 13 \n13 13 13 13 29 1  2  2  2  2  12 5  12 2  2  2  2  2  2  2  2  2  13 13 \n13 13 13 13 13 1  1  1  1  2  2  2  2  2  1  1  1  7  1  1  7  7  13 13 \n13 13 13 13 13 29 29 29 1  1  1  1  1  1  1  29 29 29 7  7  7  29 13 13 \n13 13 13 13 13 13 13 13 29 29 29 29 29 29 29 13 13 13 29 29 29 13 13 13 \n#------|----------------------------------------------------------|------- 16 \n13 13 13 13 13 13 13 13 13 13 13 13 13 13 13 13 13 13 13 13 13 13 13 13 \n13 13 13 13 13 13 13 13 13 13 13 13 13 13 13 13 13 13 13 13 13 13 13 13 \n#------|----------------------------------------------------------|------- 18\n: map-temple\n13 13 13 13 13 32 32 32 32 32 32 32 32 32 32 32 32 32 32 32 13 13 13 13  \n13 13 13 13 13 32 32 32 32 32 0  0  0  0  0  32 32 32 32 32 13 13 13 13 \n13 13 13 13 13 32 32 32 0  0  0  12 0  12 0  0  0  32 32 32 13 13 13 13 \n13 13 13 13 13 32 32 0  0  0  0  0  0  0  0  0  0  0  32 32 13 13 13 13 \n13 13 13 13 13 32 0  0  0  32 0  12 0  12 0  32 0  0  0  32 13 13 13 13 \n13 13 13 13 13 32 0  0  32 32 0  0  0  0  0  32 32 0  0  32 13 13 13 13 \n13 13 13 13 13 32 0  0  32 32 32 32 6  32 32 32 32 0  0  32 13 13 13 13 \n13 13 13 13 13 32 0  0  32 32 32 32 32 32 32 32 32 0  0  32 13 13 13 13 \n13 13 13 13 13 32 0  0  0  32 32 32 32 32 32 32 0  0  0  32 13 13 13 13 \n13 13 13 13 13 32 32 0  0  0  32 32 32 32 32 0  0  0  32 32 13 13 13 13 \n13 13 13 13 13 32 32 0  12 0  0  0  0  0  0  0  12 0  32 32 13 13 13 13 \n13 13 13 13 13 32 32 0  0  0  32 32 32 32 32 0  0  0  32 32 13 13 13 13 \n13 13 13 13 13 32 0  0  0  32 32 32 32 32 32 32 0  0  0  32 13 13 13 13 \n13 13 13 13 13 32 0  0  32 32 32 0  0  0  32 32 32 0  0  32 13 13 13 13 \n13 13 13 13 13 32 0  0  32 32 32 0  9  0  32 32 32 0  0  32 13 13 13 13\n13 13 13 13 13 32 0  0  32 32 32 0  0  0  32 32 32 0  0  32 13 13 13 13 \n13 13 13 13 13 32 0  0  0  32 32 32 0  32 32 32 0  0  0  32 13 13 13 13 \n13 13 13 13 13 32 32 0  0  0  0  0  0  0  0  0  0  0  32 32 13 13 13 13 \n13 13 13 13 13 32 32 32 0  0  0  0  0  0  0  0  0  32 32 32 13 13 13 13 \n13 13 13 13 13 32 32 32 32 32 32 32 32 32 32 32 32 32 32 32 13 13 13 13 \n#------|----------------------------------------------------------|------- 38\n13 13 13 13 13 13 13 13 13 13 13 13 13 13 13 13 13 13 13 13 13 13 13 13 \n13 13 13 13 13 13 13 13 13 13 13 13 13 13 13 13 13 13 13 13 13 13 13 13 \n#------|----------------------------------------------------------|------- 40\n: map-cave\n13 13 13 13 29 29 13 13 29 29 29 13 13 13 13 13 13 13 13 13 13 13 13 13 \n13 13 13 13 1  1  13 13 1  1  1  13 13 13 13 29 29 29 29 29 29 13 13 13 \n13 13 13 29 1  1  13 29 1  13 1  13 13 13 13 1  1  1  1  1  1  29 13 13 \n13 13 13 1  1  1  13 1  1  13 1  29 29 29 13 1  1  13 29 1  1  1  13 13 \n13 13 13 1  1  29 13 1  29 13 1  1  1  1  29 29 1  13 1  1  1  1  13 13 \n13 13 13 1  1  31 13 1  1  29 29 29 9  29 1  1  1  13 1  29 29 29 13 13 \n13 13 13 1  1  1  13 1  1  1  1  1  29 1  1  1  1  13 1  1  1  1  13 13 \n13 13 13 13 1  1  29 13 1  1  1  1  1  1  1  1  13 13 13 13 1  1  13 13 \n13 13 13 13 1  1  1  29 13 29 29 29 29 29 29 29 13 13 13 29 1  1  13 13 \n13 13 13 13 1  1  1  1  29 1  1  1  1  1  1  1  29 13 13 1  1  1  13 13 \n13 13 13 13 13 13 1  1  1  1  1  1  1  1  1  1  1  29 29 1  1  13 13 13\n13 13 13 13 13 13 13 13 13 13 13 1  29 13 13 1  1  1  1  1  13 13 13 13 \n13 13 13 13 13 13 13 13 13 13 13 1  1  13 13 13 1  1  1  1  13 13 13 13 \n13 13 13 13 13 13 13 13 13 13 13 13 1  13 13 13 13 13 13 13 13 13 13 13 \n13 13 13 13 13 13 13 13 13 13 13 13 6  13 13 13 13 13 13 13 13 13 13 13 \n#------|----------------------------------------------------------|------- 55\n13 13 13 13 13 13 13 13 13 13 13 13 13 13 13 13 13 13 13 13 13 13 13 13 \n13 13 13 13 13 13 13 13 13 13 13 13 13 13 13 13 13 13 13 13 13 13 13 13 \n13 13 13 13 13 13 13 13 13 13 13 13 13 13 13 13 13 13 13 13 13 13 13 13\n#------|----------------------------------------------------------|------- 58\n: map-castle\n13 13 13 13 13 13 13 13 13 13 13 13 33 13 13 13 13 13 13 13 13 13 13 13\n13 13 13 13 13 13 13 13 13 13 13 33 8  33 13 13 13 13 13 13 13 13 13 13 \n13 13 13 13 13 13 13 13 13 13 33 0  4  0  33 13 13 13 13 13 13 13 13 13\n13 13 13 13 13 13 13 13 13 33 0  0  4  0  0  33 13 13 13 13 13 13 13 13\n13 13 13 33 33 33 33 33 33 33 33 33 11 33 33 33 33 33 33 33 33 33 13 13 \n13 13 13 33 0  4  0  33 33 0  0  0  4  0  0  0  33 33 0  4  0  33 13 13\n13 13 13 33 0  4  0  0  0  0  0  0  4  0  0  0  0  0  0  4  0  33 13 13\n13 13 13 33 0  4  0  33 33 0  0  0  4  0  0  0  33 33 0  4  0  33 13 13 \n13 13 13 33 0  4  0  33 33 0  0  0  4  0  0  0  33 33 0  4  0  33 13 13\n13 13 13 33 0  4  0  33 33 33 33 33 4  33 33 33 33 33 0  4  0  33 13 13\n13 13 13 33 0  4  0  33 0  0  0  0  4  0  0  0  0  33 0  4  0  33 13 13 \n13 13 13 33 0  4  0  33 0  12 0  33 33 33 0  12 0  33 0  4  0  33 13 13\n13 13 13 33 0  4  0  33 0  0  0  0  12 0  0  0  0  33 0  4  0  33 13 13\n13 13 13 33 0  4  0  33 0  0  0  0  0  0  0  0  0  33 0  4  0  33 13 13 \n13 13 13 33 0  4  0  33 33 33 0  33 33 33 0  33 33 33 0  4  0  33 13 13\n13 13 13 33 0  4  0  33 33 0  0  0  4  0  0  0  33 33 0  4  0  33 13 13\n13 13 13 33 0  4  0  33 33 0 12  0  4  0  12 0  33 33 0  4  0  33 13 13 \n13 13 13 33 0  4  0  33 33 0  0  0  4  0  0  0  33 33 0  4  0  33 13 13\n13 13 13 33 0  4  0  0  0  0 12  0  4  0  12 0  0  0  0  4  0  33 13 13\n13 13 13 33 0  4  0  33 33 0  0  0  4  0  0  0  33 33 0  4  0  33 13 13 \n13 13 13 33 0  4  0  33 33 0 12  0  4  0  12 0  33 33 0  4  0  33 13 13\n13 13 13 33 33 33 33 33 33 0  0  0  4  0  0  0  33 33 33 33 33 33 13 13\n13 13 13 13 13 13 13 13 33 33 33 33 6  33 33 33 33 13 13 13 13 13 13 13 \n#------|----------------------------------------------------------|------- 81\n13 13 13 13 13 13 13 13 13 13 13 13 13 13 13 13 13 13 13 13 13 13 13 13 \n13 13 13 13 13 13 13 13 13 13 13 13 13 13 13 13 13 13 13 13 13 13 13 13 \n13 13 13 13 13 13 13 13 13 13 13 13 13 13 13 13 13 13 13 13 13 13 13 13 \n\n### ENEMY SPAWN LISTS\n#I wanted to do random spawns, but this is much easier.\n#QUICK ID REFRECE:\n#1 = Shrimp\n#2 = Lobster\n#3 = Waterbear\n#4 = Skull\n#5 = Squid\n#6 = Wizard\n: enemy-spawn-overworld\n#X  Y  ID\n 6  10 1 #1\n 7  14 1 #2\n 15 14 1 #3\n 20 7  2 #4\n 11 7  2 #5\n 0  0  0 #6\n 0  0  0 #7\n 0  0  0 #8\n: enemy-spawn-cave\n#X  Y  ID\n 11 50 3 #1\n 19 52 3 #2\n 4  42 3 #3\n 13 45 3 #4\n 15 47 3 #5\n 2  51 4 #6\n 21 44 4 #7\n 13 41 4 #8\n: enemy-spawn-temple\n#X  Y  ID\n 8  27 2 #1\n 16 27 2 #2\n 12 29 2 #3\n 8  36 2 #4\n 16 36 2 #5\n 12 33 2 #6\n 0  0  0 #7\n 0  0  0 #8\n: enemy-spawn-castle\n#X  Y  ID\n 12 66 6 #1\n 12 69 5 #2\n 5  71 5 #3\n 19 71 5 #4\n 11 74 5 #5\n 13 74 5 #6\n 10 72 5 #7\n 14 72 5 #8\n\n\n\n### SPRITES\n# Each sprite is 8x8 pixels, and is drawn in two layers: Pink, then Blue. Overlapping pixels turn white.\n\n: tileset\n\n#0 = Blank Space\n0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00\n0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00\n\n#1 = Ground\n0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00\n0x00 0x20 0x00 0x00 0x02 0x00 0x40 0x00\n\n#2 = Pathway\n0x0C 0xC0 0x02 0x60 0x00 0x06 0x20 0x80\n0x0C 0xC0 0x02 0x60 0x00 0x06 0x20 0x80\n\n#3 = Bridge\n0x81 0x81 0x81 0x81 0x81 0x81 0x81 0x81\n0xBD 0xBD 0x81 0xBD 0xBD 0x81 0xBD 0x81\n\n#4 = Carpet\n0x42 0x42 0x42 0x42 0x42 0x42 0x42 0x42 \n0x7E 0x7E 0x7E 0x7E 0x7E 0x7E 0x7E 0x7E\n\n#5 = Door into dungeon\n0x00 0x18 0x24 0x42 0x42 0x42 0x42 0x00\n0x00 0x18 0x24 0x42 0x42 0x42 0x42 0x00\n\n#6 = Door out of dungeon\n0x00 0x00 0x18 0x3C 0x3C 0x3C 0x3C 0x00\n0x00 0x00 0x18 0x3C 0x3C 0x3C 0x3C 0x00\n\n#7 = Seaweed\n0xAA 0xBE 0xCD 0x7E 0xED 0xEF 0x77 0xEE\n0x00 0x24 0x48 0x48 0x44 0x22 0x22 0x44\n\n#8 = Princess's space\n0x00 0x22 0x71 0x5A 0xB1 0x84 0x20 0x6E \n0x0E 0x3E 0x29 0x5A 0xB1 0xF4 0x38 0x6E\n\n#9 = Treasure\n0x00 0x7C 0x3E 0x08 0x3E 0x3E 0x3E 0x00 \n0x00 0xFC 0x7E 0x80 0xF6 0xFE 0x7E 0x00\n\n#10 = Treasure Opened\n0x00 0x30 0x00 0x00 0x3E 0x3E 0x3E 0x00 \n0x00 0x00 0xFC 0x82 0xFE 0xFE 0x7E 0x00 \n\n#11 = Locked Door\n0x00 0x7E 0x7E 0x7E 0x76 0x76 0x7E 0x00\n0x00 0x7E 0x42 0x42 0x42 0x42 0x42 0x00\n\n#12 = Pillar\n0xFF 0x7E 0x3C 0x3C 0x3C 0x3C 0x7E 0xFF\n0xFF 0x00 0x28 0x28 0x28 0x28 0x00 0xFF\n\n#13 = Blank Space (impassable)\n0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00\n0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00\n\n#14 = Tower\n0x18 0x7E 0x0C 0x7E 0x18 0x7E 0x30 0x7E\n0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00\n\n#15 = Tower Top\n0x99 0xFF 0x00 0x7E 0x3C 0x7E 0x3C 0x7E\n0x00 0x00 0x00 0x00 0x10 0x10 0x00 0x00\n\n#16, 17, 18 = Temple roof\n0x00 0x00 0x00 0x03 0x0C 0x33 0xCF 0x3F\n0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00\n\n0x00 0x3C 0xDB 0x3C 0xFF 0xFF 0xFF 0xFF\n0x00 0x00 0x18 0x24 0x18 0x24 0x18 0x00\n\n0x00 0x00 0x00 0xC0 0x30 0xCC 0xF3 0xFC\n0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00\n\n#19-27 = Sunset  over Castle Daiouika\n0x00 0x00 0x00 0x00 0x00 0x01 0x03 0x07\n0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00\n\n0x00 0x07 0x1F 0x7F 0xFF 0xFF 0xFF 0xFE\n0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00\n\n0xC7 0xD3 0xCC 0xCF 0xCC 0xC3 0xC7 0x00\n0x00 0x10 0x10 0x10 0x10 0x10 0x10 0x00\n\n0x00 0xE0 0x78 0x7E 0xFF 0xFF 0xFF 0x7F\n0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00\n\n0x00 0x00 0x00 0x00 0x00 0x80 0xC0 0xE0\n0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00\n\n0x00 0x0F 0x0F 0x00 0x1F 0x00 0x00 0x00\n0x00 0x00 0x00 0x00 0x00 0x00 0xFF 0x00\n\n0x00 0xFE 0xFE 0x00 0xFF 0x00 0x00 0x00\n0x00 0x00 0x00 0x00 0x00 0x00 0xFF 0x00\n\n0x00 0x7F 0x7F 0x00 0xFF 0x00 0x00 0x00\n0x00 0x00 0x00 0x00 0x00 0x00 0xFF 0x00\n\n0x00 0xF0 0xF0 0x00 0xF8 0x00 0x00 0x00\n0x00 0x00 0x00 0x00 0x00 0x00 0xFF 0x00\n\n#28 = Cliff North Edge\n0x00 0x00 0x00 0x00 0x00 0x00 0xCE 0xB3\n0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00\n\n#29 = Cliff South Edge and wall\n0x10 0xAD 0x66 0x11 0x55 0x44 0x11 0x44\n0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00\n\n#30 = Fort\n0x1C 0x1C 0x10 0xDB 0xFF 0x7E 0x66 0x66 \n0x0C 0x0C 0x00 0xDB 0xFF 0x00 0x66 0x66\n\n#31 = Cliff Wall\n0x44 0x15 0x51 0x55 0x54 0x04 0x45 0x51\n0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00\n\n#32 = Brick\n0xEE 0x00 0xBB 0x00 0x77 0x00 0xDD 0x00\n0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00\n\n#33 = Castle Brick\n0xFF 0xFF 0xFF 0xFF 0xFF 0xFF 0xFF 0xFF\n0xEE 0x00 0xBB 0x00 0x77 0x00 0xDD 0x00\n\n: playerSprite\n0x02 0x32 0x7A 0x6A 0xB7 0x82 0x22 0xC2\n0x02 0x32 0x52 0x6A 0xB0 0xE8 0x2E 0xC0\n\n: playerSprite_dead\n0x08 0xFF 0x08 0x20 0xA6 0x8F 0x43 0x0C\n0x00 0xF0 0x00 0x20 0xA6 0xBF 0x7F 0x0E \n\n: enemiesSprites\n#1 = Shrimp\n0x00 0x3C 0x39 0x76 0x68 0x46 0x20 0x00\n0x00 0x14 0x00 0x00 0x00 0x00 0x00 0x00\n\n#2 = Lobster\n0x00 0x0E 0x1F 0x3F 0x0C 0x5F 0x5C 0x3F\n0x00 0x00 0x00 0x00 0x00 0x57 0x54 0x07\n\n#3 = Waterbear\n0x00 0x3E 0x7F 0xFF 0xFF 0xFF 0x5E 0x55\n0x00 0x36 0x5B 0xEB 0xAB 0xEB 0x14 0x15\n\n#4 = Skull\n0x38 0x7C 0xBA 0xBA 0x7C 0x44 0x54 0x38\n0x38 0x7C 0xBA 0x92 0x7C 0x00 0x54 0x38\n\n#5 = Squid\n0x0C 0x1E 0x3F 0x80 0x9E 0x6C 0x92 0x7E\n0x0C 0x1E 0x03 0x8A 0x8E 0x04 0x80 0x58\n\n#6 = Wizard\n0x18 0x3C 0x7E 0xFF 0x18 0x3C 0xBD 0x66\n0x18 0x3C 0x7E 0xFF 0x24 0xBD 0x99 0x00\n\n: hurtBox\n0xFF 0xFF 0xFF 0xFF 0xFF 0xFF 0xFF 0xFF\n\n#The artifacts kind of break the 8x8 rule, since they don't need to be drawn on a grid.\n\n: swordSprite #10 px\n0x10 0x18 0x10 0x18 0x10 0x18 0x3C 0x18 0x08 0x18 \n0x01 0x82 0x41 0x82 0x40 0x00 0x3C 0x08 0x18 0x18\n\n: armourSprite #8 px\n0x18 0x3C 0x66 0xDB 0xD3 0x66 0xFF 0x7E\n0x00 0x3C 0x7E 0x7E 0x7E 0x7E 0x3C 0x00\n\n: keySprite #9px\n0x08 0x1C 0x3E 0x14 0x1C 0x08 0x18 0x08 0x18\n0x08 0x1C 0x3E 0x00 0x1C 0x08 0x08 0x08 0x08\n\n\n# The frame that the world/map is drawn within.\n#  The corners are all 2x2 in white. The border is a single pixel line.\n\n: frame-corner-nw\n0x30 0x20\n\n: frame-corner-ne\n0xC0 0x40\n\n: frame-corner-sw\n0x20 0x30\n\n: frame-corner-se\n0x40 0xC0\n\n: frame-h\n0xFF \n\n: frame-v\n0x80\n\n# Victory Screen! It's divided into 4 parts, depending on whether the player has the sacred armor and/or the sacred sword!\n: vic-sword\n\t0x08 0x08 0x08 0x08 0x08 0x08 0x08 0x08\n\t0x08 0x08 0x08 0x08 0x08 0x08 0x08 0x08\n\t\n\t0x18 0x18 0x18 0x18 0x18 0x18 0x18 0x18\n\t0x18 0x18 0x18 0x18 0x18 0x18 0x18 0x18\n\t\n\t0x1C 0x1C 0x1C 0x1C 0x1C 0x1C 0x3C 0x3C\n\t0x1C 0x1C 0x1C 0x1C 0x1C 0x1C 0x3C 0x3C\n\t\n\t0x3C 0x3C 0x3C 0x3C 0x3C 0x3C 0x3C 0x3C \n\t0x3C 0x3C 0x3C 0x3C 0x3C 0x3C 0x3C 0x3C \n\t\n\t0xFF 0xFF 0x18 0x38 0x7E 0x7F 0x3C 0x18\n\t0x00 0x00 0x00 0x38 0x7E 0x7F 0x3F 0x07\n\t\n\t0x19 0x00 0x00 0x00 0x03 0x07 0x07 0x0C\n\t0x03 0x00 0x00 0x00 0x03 0x07 0x07 0x0C\n\n: vic-sword-sacred\n\n\n\n: vic-player\n\t0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00\n\t0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00\n\t\n\t0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00\n\t0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00\n\t\n\t0x00 0x00 0x00 0x00 0x03 0x0F 0x1F 0x1F\n\t0x00 0x00 0x00 0x00 0x03 0x0F 0x1F 0x1F\n\t\n\t0x3F 0x3F 0x3F 0x7E 0x7F 0x7F 0x7F 0x7E\n\t0x3F 0x3F 0x3F 0x7E 0x7E 0x7E 0x7E 0x7E\n\t\n\t0x3F 0x3F 0x3F 0x1F 0x1F 0x8F 0x07 0x79\n\t0x3F 0x3F 0x3F 0x1F 0x1F 0x8F 0x07 0xFF\n\t\n\t0xFC 0xFC 0x00 0x01 0xE7 0xFF 0xFF 0x7E\n\t0xFF 0xFC 0x00 0x01 0xE7 0xFF 0xFF 0x7E\n\t\n\t#--------------------------------------\n\t0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00\n\t0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00\n\t\n\t0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00\n\t0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00\n\t\n\t0x00 0x00 0x00 0x7E 0xFF 0xFF 0xFF 0xFF\n\t0x00 0x00 0x00 0x7E 0xFF 0xFF 0xFF 0xFF\n\t\n\t0xFE 0x3C 0x1D 0xDE 0x3E 0x3C 0x1E 0x18\n\t0xFE 0x3C 0x1C 0x1C 0x1C 0x1C 0x1E 0x18\n\t\n\t0x37 0xEC 0xE8 0xE8 0xE8 0xEC 0xE7 0xF0\n\t0x37 0xEC 0xE8 0xE8 0xE8 0xEC 0xE7 0xF1\n\t\n\t0x01 0x63 0xF1 0xE1 0xC0 0xC0 0x80 0x00\n\t0x77 0x73 0xF1 0xE1 0xC0 0xC0 0x80 0x00\n\t\n\t#--------------------------------------\n\t0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00\n\t0x00 0x00 0x00 0x00 0x00 0x00 0x01 0x01\n\t\n\t0x00 0x00 0x00 0x00 0x03 0x0F 0x1F 0x1F\n\t0x03 0x07 0x07 0x0F 0x0F 0x0F 0x1F 0x1F\n\t\n\t0x39 0x31 0x30 0x76 0xB9 0xD9 0xE1 0xE8\n\t0x39 0x31 0x30 0x70 0xB0 0xD0 0xE0 0xE8\n\t\n\t0x77 0x76 0xB5 0x7A 0x7A 0x7A 0x7B 0xF9\n\t0x77 0x76 0x35 0x3A 0x3A 0x3A 0x7B 0xFD\n\t\n\t0x78 0xB8 0x50 0x50 0x50 0xA8 0x48 0x98\n\t0x7E 0xBF 0x5F 0x5F 0x5F 0xBF 0x5B 0xB8\n\t\n\t0x9C 0xCF 0xC7 0xE0 0xFC 0x7F 0x0F 0x01\n\t0x9C 0xCF 0xC7 0xE0 0xFC 0x7F 0x0F 0x01\n\t\n: vic-player-armor\n\n: vic-princess\n\t0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00\n\t0x1F 0x3F 0x3F 0x7F 0xFF 0xFF 0xFF 0xFF\n\n\t0x00 0x00 0x00 0x7C 0xFF 0xFF 0xFF 0xFF\n\t0xFF 0xFF 0xFF 0xFF 0xFF 0xFF 0xFF 0xFF\n\t\n\t0xF9 0xF8 0xF0 0xF6 0xF9 0xF9 0xF8 0xF0\n\t0xF9 0xF8 0xF0 0xF0 0xF0 0xF0 0xF0 0xF0\n\t\n\t0x19 0xEF 0x37 0x17 0x17 0x17 0x37 0xEF\n\t0x19 0xEF 0x37 0x17 0x17 0x17 0x37 0xEF\n\t\n\t0x00 0x00 0x1E 0x3F 0x27 0x03 0x03 0x01\n\t0x1F 0xFF 0xFF 0xFF 0xFF 0xFF 0xFF 0xFF\n\t\n\t0xF1 0xF8 0x1C 0x66 0x72 0x38 0x8E 0xE0\n\t0xF1 0xF8 0xFC 0xE6 0x72 0x38 0x8E 0xE0\n\t\n\t#--------------------------------------\n\t0x06 0x06 0x0C 0x0C 0x0C 0x04 0x04 0x06\n\t0xF2 0xF2 0xF4 0xF4 0xF4 0xFC 0xFC 0xFA\n\t\n\t0x06 0x03 0x01 0x00 0x80 0xE0 0xF0 0xF8\n\t0xFA 0xF9 0xF8 0xF8 0xF8 0xF8 0xFC 0xFC\n\t\n\t0xFC 0xFC 0xFE 0xFE 0xFE 0xFE 0xFE 0xFE\n\t0xFC 0xFC 0xFE 0xFE 0xFE 0xFE 0xFE 0xFE\n\t\n\t0xFC 0xFC 0xF8 0xF8 0xF0 0xE0 0xC0 0x01\n\t0xFC 0xFC 0xF8 0xF8 0xF0 0xE0 0xE0 0xF1\n\t\n\t0x03 0x03 0x03 0x03 0x01 0x8F 0xAF 0xEE\n\t0xF3 0xF3 0xFB 0xFB 0xF9 0xFF 0xFF 0xEE\n\t\n\t0xE0 0xC0 0x00 0x00 0x00 0x00 0x00 0x00\n\t0xE0 0xC0 0x00 0x00 0x00 0x00 0x00 0x00\n\t\n\t#--------------------------------------\n\t0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00\n\t0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00\n\t\n\t0x00 0x00 0x80 0xC0 0x60 0x30 0x30 0x18\n\t0x00 0x00 0x80 0x40 0x20 0x10 0x10 0x08\n\t\n\t0x18 0x0C 0x0C 0x0C 0x18 0x18 0x30 0x30\n\t0x08 0x04 0x04 0x04 0x08 0x08 0x10 0x10\n\t\n\t0x60 0x60 0x60 0x60 0x60 0x60 0x30 0x98 \n\t0x20 0x20 0x20 0x20 0x20 0x20 0x10 0x88\n\t\n\t0xC0 0x60 0x20 0x80 0x80 0x80 0x00 0x00\n\t0xC0 0x60 0x20 0x80 0x80 0x80 0x00 0x00\n\t\n\t0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00\n\t0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00\n\t\n: vic-quest-complete-text\n\t0x00 0x0C 0x1F 0x1B 0x19 0x1D 0x0A 0x0D #Q\n\t0x00 0x1E 0x12 0x12 0x12 0x14 0x1A 0x00\n\t\n\t0x00 0x0C 0x7F 0xF5 0xFE 0xF4 0xF5 0x76 #UE\n\t0x00 0xAD 0xA9 0xAD 0xA8 0xA8 0xED 0x00 \n\t                                        #S\n\t0x00 0x18 0xDD 0x19 0xD9 0xC8 0x48 0xC8 #T\n\t0x00 0xB9 0x11 0x91 0x91 0x91 0x91 0x00\n\t                                        #C\n\t0x00 0xC9 0xFB 0x9F 0x9F 0x8E 0xCA 0xEE #O\n\t0x00 0xDD 0x15 0x15 0x15 0x15 0xDD 0x00\n\t                                        #M\n\t0x00 0x12 0x2B 0xCE 0xAC 0x9F 0x8A 0x8A #P\n\t0x00 0x16 0xB5 0x55 0x16 0x14 0x14 0x00\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n\t0x00 0x0C 0x2E 0xE4 0xEE 0x64 0x44 0x36 #LE\n\t0x00 0x4D 0x48 0x4C 0x48 0x48 0x6C 0x00\n\t                                        #T\n\t0x00 0xDA 0xFF 0xCB 0xDD 0x49 0x4A 0x4D #E!\n\t0x00 0xDA 0x92 0x9A 0x92 0x90 0x9A 0x00\n\t\n\t\n# Game over screen\n: gameover-image\n\t0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00\n\t0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00\n\t\n\t0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00\n\t0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00\n\n\t0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00\n\t0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00\n\n\t0x00 0x00 0x00 0x00 0x03 0x07 0x07 0x0F\n\t0x00 0x00 0x00 0x00 0x03 0x07 0x07 0x0F\n\n\t0x0F 0x0E 0x8E 0xFE 0x3C 0x00 0x00 0x00\n\t0x3F 0x7F 0xFF 0xFE 0x3C 0x43 0x3F 0x1F\n\t\n\t0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00\n\t0x07 0x00 0x00 0x00 0x00 0x00 0x00 0x00\n\t\n\t#--------------------------------------\n\t0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00\n\t0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00\n\t\n\t0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00\n\t0x00 0x00 0x00 0x00 0x00 0x00 0x07 0x3C\n\t\n\t0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 \n\t0xFF 0x00 0x03 0x1F 0x00 0x01 0x00 0x00\n\n\t0x00 0x00 0x40 0x7C 0x1B 0xC7 0xCF 0xEF\n\t0x00 0x00 0x40 0x7C 0x1A 0xC7 0xFF 0xEE\n\t\n\t0xDF 0xDD 0xDB 0x57 0x0F 0x0E 0x1E 0x1F\n\t0xDF 0xDD 0xDB 0x57 0x0F 0xEE 0xFE 0xFF\n\t\n\t0x0F 0x03 0x00 0x00 0x00 0x00 0x00 0x00\n\t0xEF 0xF3 0x04 0x00 0x00 0x00 0x00 0x00\n\t\n\t#--------------------------------------\n\t0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00\n\t0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00\n\t\n\t0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00\n\t0x00 0x00 0x00 0x00 0x00 0x00 0x80 0x00\n\t\n\t0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00\n\t0xFF 0x3F 0xC0 0xF8 0x70 0xFE 0x1C 0x30\n\t\n\t0x00 0x00 0x7F 0xBF 0x7F 0xEF 0xDF 0xFF\n\t0x00 0x00 0x6F 0x07 0x0F 0x0F 0x0F 0x47\n\t\n\t0xFF 0xFD 0xF9 0xE3 0x67 0xF6 0x7E 0x00\n\t0x6F 0xFD 0xF9 0xE1 0x61 0xF2 0x7E 0x80\n\t\n\t0xF8 0xFE 0x03 0x00 0x00 0x00 0x00 0x00 \n\t0xFF 0xFF 0x03 0x00 0x00 0x00 0x00 0x00\n\t\n\t#--------------------------------------\n\t0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00\n\t0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00\n\t\n\t0x00 0x00 0x00 0x00 0x06 0x0E 0x0E 0x06\n\t0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00\n\t\n\t0x07 0x07 0x03 0x0F 0x1F 0x1B 0x03 0x03\n\t0xE0 0xC0 0x00 0x00 0x00 0x03 0x03 0x03\n\t\n\t0x01 0x01 0x81 0xF1 0xF9 0xFC 0xFC 0xBC\n\t0x01 0x01 0x81 0xF1 0xF9 0xFC 0xFF 0xBC\n\t\n\t0x8D 0xC5 0xE5 0xB9 0x7D 0xE2 0xC6 0x78\n\t0x8D 0x85 0xC5 0xB9 0x7D 0xE2 0xC7 0x78\n\t\n\t0x00 0x00 0x80 0x00 0x00 0x00 0x00 0x00\n\t0x87 0xFF 0xE0 0x00 0x00 0x00 0x00 0x00 \n\t\n\t#--------------------------------------\n\t0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00\n\t0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00\n\t\n\t0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00\n\t0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00\n\t\n\t0x00 0x30 0xF0 0xC0 0x80 0x80 0xC0 0xC0\n\t0x00 0x00 0x00 0x00 0x80 0x80 0xC0 0xC0 \n\t\n\t0xC0 0xC0 0xC0 0xE0 0xE0 0xE0 0xE0 0xE0\n\t0xC0 0xC0 0xC0 0xE0 0xE0 0xE0 0xF0 0xE0\n\t\n\t0x00 0x80 0xC0 0xC0 0x60 0x60 0xC0 0x00\n\t0xFC 0xFE 0xFF 0xFF 0x7F 0xFE 0xDC 0x38\n\t\n\t0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00\n\t0xE0 0x00 0x00 0x00 0x00 0x00 0x00 0x00 \n\t\n\n: gameover-text\n\t0x0A 0x1F 0x18 0x1E 0x1B 0x0B 0x0D 0x0F #G\n\t0x1E 0x10 0x10 0x16 0x12 0x12 0x1E 0x00\n\t\n\t0x31 0x59 0x65 0x55 0x7D 0x2D 0x25 0x24 #A\n\t0x31 0x49 0x49 0x79 0x49 0x49 0x49 0x00\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t#M\n\t0x13 0x2B 0x49 0x2B 0x1B 0x19 0x08 0x09 \n\t0x13 0xB2 0x52 0x13 0x12 0x12 0x13 0x00 \n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t#E\n\t0x81 0xC3 0x03 0x03 0xC3 0x01 0x81 0xC1\n\t0x83 0x02 0x02 0x82 0x02 0x02 0x83 0x00 #O\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n\t0x88 0xAC 0x64 0x64 0x63 0x62 0xA1 0xE1 \n\t0xC8 0x48 0x48 0x45 0x45 0x42 0xC2 0x00 #V\n\t\n\t0x9C 0x5E 0x48 0x58 0x9E 0x88 0x04 0x0E #E\n\t0x9C 0x90 0x90 0x1C 0x10 0x10 0x1C 0x00\n\t\n\t0xE0 0xF0 0x48 0x68 0xB0 0xC0 0x50 0x48 #R\n\t0xE0 0x90 0x90 0xE0 0xC0 0xA0 0x90 0x00\n\n: title\n\n\t0x00 0x00 0x06 0x04 0x04 0x06 0x00 0x00 #--C\n\t0x00 0x00 0x06 0x04 0x04 0x06 0x00 0x00\n\n\t0x03 0x05 0x11 0x01 0x01 0x03 0x03 0x07 #O\n\t0x02 0x07 0x15 0x19 0x01 0x01 0x03 0x03\n\t\n\t0x0E 0x1E 0x3C 0xFC 0xF8 0xF8 0xF0 0xF0 \n\t0x07 0x07 0x0E 0x1E 0x7C 0xFC 0xF8 0xF0\n\t\n\t0xF0 0xF0 0xF0 0xF0 0xF0 0xF0 0xF0 0xF0\n\t0xF0 0xF0 0xF0 0xF0 0xF0 0xF0 0xF0 0xF0\n\t\n\t0x70 0x70 0x70 0x70 0x70 0x70 0x70 0x30\n\t0xF0 0xF0 0xF0 0xF0 0xF0 0xF0 0xF0 0xF0\n\t\n\t0x38 0x3C 0x1E 0x0E 0x07 0x07 0x03 0x03 \n\t0xF0 0xF8 0xFC 0x3C 0x1E 0x0E 0x0F 0x07\n\t\n\t0x01 0x01 0x01 0x01 0x01 0x01 0x00 0x00\n\t0x07 0x03 0x03 0x01 0x01 0x01 0x01 0x01 \n\t\n\t0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00\n\t0x00 0x00 0x00 0x06 0x05 0x06 0x04 0x00 #-P\n\t\n\t#--------------------------------------\n\t0x00 0x00 0xC4 0xAA 0xCE 0xAA 0x00 0x00 #--RA\n\t0x00 0x00 0xC4 0xAA 0xCE 0xAA 0x00 0x00\n\t\n\t0x00 0x80 0x80 0x80 0xC0 0xC0 0xE0 0xF0\n\t0x00 0x00 0x00 0x80 0x80 0x80 0xC0 0xC0 \n\t\n\t0xF8 0xFC 0x7E 0x3F 0x1F 0x1F 0x0F 0x0F\n\t0xE0 0xF0 0xF8 0xFC 0x7E 0x3F 0x1F 0x0F\n\t\n\t0x0F 0x0F 0x0E 0x0E 0x0E 0x0E 0x0E 0x0C\n\t0x0F 0x0F 0x0F 0x0F 0x0F 0x0F 0x0F 0x0F\n\t\n\t0x0C 0x0C 0x0C 0x0C 0x0C 0x0C 0x0C 0x1C\n\t0x0F 0x0F 0x0F 0x0F 0x0F 0x0F 0x0F 0x0F\n\t\n\t0x1C 0x7C 0xFC 0xF0 0xE0 0xC0 0x80 0x80\n\t0x0F 0x1F 0x3F 0x7E 0xFC 0xF8 0xF0 0xE0 \n\t\n\t0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00\n\t0xE0 0xC0 0xC0 0x80 0x80 0x00 0x00 0x00 \n\t\n\t0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00\n\t0x00 0x00 0x00 0x62 0x57 0x64 0x53 0x00 #-RE\n\t\n\t#--------------------------------------\n\t0x00 0x00 0xE8 0x4D 0x4A 0x48 0x00 0x00 #--TM\n\t0x00 0x00 0xE8 0x4D 0x4A 0x48 0x00 0x00\n\t\n\t0x00 0x00 0x00 0x00 0x00 0x01 0x01 0x01\n\t0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x01\n\t\n\t0x00 0x00 0x08 0x08 0x08 0x1C 0x1C 0x3E #c\n\t0x01 0x00 0x00 0x08 0x08 0x08 0x1C 0x1C\n\t\n\t0x36 0x72 0x63 0x61 0x61 0x61 0x61 0x60\n\t0x1E 0x36 0x37 0x33 0x63 0x61 0x61 0x62\n\t\n\t0x60 0x20 0x21 0x21 0x33 0x36 0x16 0x1C\n\t0x60 0x60 0x60 0x61 0x61 0x63 0x37 0x37\n\t\n\t0x1C 0x08 0x08 0x08 0x00 0x00 0x00 0x00\n\t0x3E 0x1C 0x1C 0x08 0x08 0x08 0x00 0x00\n\t\n\t0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00\n\t0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 \n\t\n\t0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00\n\t0x00 0x00 0x00 0x6C 0x48 0x24 0x6C 0x00 #-SS\n\t\n\t#--------------------------------------\n\t0x00 0x00 0x92 0xAB 0xBA 0xAA 0x00 0x00 #--AN\n\t0x00 0x00 0x92 0xAB 0xBA 0xAA 0x00 0x00\n\t\n\t0x02 0x02 0x02 0x02 0x03 0xF3 0xFF 0x8F #t\n\t0x00 0x00 0x02 0x02 0x02 0x62 0xFB 0xFF\n\t\n\t0x83 0xC3 0x43 0x23 0x03 0x03 0x03 0x03 \n\t0x8F 0xC3 0xC3 0x63 0x03 0x03 0x03 0x03\n\t\n\t0x01 0x01 0x01 0x01 0x01 0x01 0x01 0x01\n\t0x03 0x03 0x03 0x03 0x03 0x03 0x03 0x03\n\t\n\t0x01 0x03 0x03 0x03 0x03 0x02 0x02 0x06\n\t0x03 0x03 0x03 0x03 0x03 0x03 0x03 0x03\n\t\n\t0x46 0x46 0x24 0x14 0x18 0x00 0x00 0x00\n\t0x03 0x47 0x66 0x36 0x3C 0x18 0x00 0x00\n\t\n\t0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00\n\t0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 \n\t\n\t0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00\n\t0x00 0x00 0x00 0x49 0x5D 0x10 0x0C 0x00 #-\"E\"\n\t\n\t#--------------------------------------\n\t0x00 0x00 0x5C 0x50 0xD4 0x5C 0x00 0x00 #--NG\n\t0x00 0x00 0x5C 0x50 0xD4 0x5C 0x00 0x00\n\t\n\t0x00 0x00 0x00 0x00 0x00 0x08 0x04 0xF8\n\t0x00 0x00 0x00 0x00 0x00 0x08 0x04 0xFC\n\t\n\t0x00 0x00 0x01 0x01 0x81 0x83 0x83 0x86 #o\n\t0x00 0x00 0x00 0x01 0x01 0x01 0x03 0x03 \n\t\n\t0x86 0x8E 0x8C 0x8C 0x8C 0x8C 0x8C 0x8C\n\t0x06 0x86 0x86 0x8E 0x8C 0x8C 0x8C 0x8C\n\t\n\t0x0C 0x04 0x04 0x04 0x06 0x06 0x02 0x03\n\t0x8C 0x8C 0x8C 0x8C 0x8C 0x8C 0x86 0x06\n\t\n\t0x03 0x01 0x01 0x01 0x00 0x00 0x00 0x00 \n\t0x07 0x03 0x03 0x01 0x01 0x01 0x00 0x00\n\t\n\t0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00\n\t0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 \n\t\n\t0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00\n\t0x00 0x00 0x00 0x15 0x25 0x21 0x41 0x00 #-/ \"\n\t\n\t#--------------------------------------\n\t0x00 0x00 0x66 0x55 0x66 0x45 0x00 0x00 #--PR\n\t0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00\n\t\n\t0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00\n\t0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00\n\t\n\t0x00 0x00 0x00 0x00 0x01 0x81 0x83 0xC2 \n\t0x00 0x00 0x00 0x00 0x00 0x01 0x81 0x83\n\t\n\t0xC2 0xE4 0x60 0x60 0x60 0x60 0x60 0x60\n\t0xC2 0xC6 0xC0 0x60 0x60 0x60 0x60 0x60\n\t\n\t0x60 0x60 0x60 0x40 0x40 0xC0 0xC0 0xC0\n\t0x60 0x60 0x60 0x60 0x60 0x60 0xE0 0xE0\n\t\n\t0x81 0x01 0x01 0x01 0x00 0x00 0x00 0x00\n\t0xC0 0x81 0x81 0x01 0x01 0x03 0x00 0x00\n\t\n\t0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00\n\t0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 \n\t\n\t0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00\n\t0x00 0x00 0x00 0xD1 0x10 0xC0 0x40 0x80 #-6\"\n\t\n\t#--------------------------------------\n\t0x00 0x00 0x26 0x74 0x42 0x36 0x00 0x00 #--ES\n\t0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00\n\t\n\t0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00\n\t0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00\n\t\n\t0x00 0x00 0x00 0x00 0x04 0x04 0x8E 0x8E # m\n\t0x00 0x00 0x00 0x00 0x00 0x04 0x04 0x8E\n\t\n\t0xDB 0x5B 0x51 0x71 0x61 0x60 0x40 0x40\n\t0x8E 0xDB 0x5B 0x73 0x73 0x71 0x61 0x60\n\t\n\t0x40 0x40 0x40 0xC0 0x80 0x80 0x80 0x80\n\t0x60 0x60 0x40 0x40 0xC0 0xC0 0xC0 0xC0\n\t\n\t0x81 0x01 0x01 0x01 0x00 0x00 0x00 0x00 \n\t0xC0 0x81 0x81 0x81 0x01 0x03 0x00 0x00\n\t\n\t0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00\n\t0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 \n\t\n\t0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00\n\t0x00 0x00 0x00 0xDC 0x94 0x94 0x9C 0x00 #-TO\n\t\n\t#--------------------------------------\n\t0x00 0x00 0x49 0xED 0x8B 0x69 0x00 0x00 #--EN\n\t0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00\n\t\n\t0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00\n\t0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00\n\t\n\t0x00 0x00 0x00 0x00 0x08 0x08 0x0C 0x1C\n\t0x00 0x00 0x00 0x00 0x00 0x08 0x08 0x0C\n\t\n\t0x1C 0x36 0xB2 0xE3 0xE3 0xC3 0xC3 0xC3\n\t0x1C 0x1C 0x36 0xB6 0xA2 0xE3 0xC3 0xC3\n\t\n\t0xC3 0xC3 0x82 0x82 0x82 0x82 0x82 0x82\n\t0xC3 0xC3 0xC3 0xC3 0xC3 0xC3 0xC3 0xC3\n\t\n\t0x82 0x02 0x02 0x00 0x04 0x00 0x00 0x00\n\t0xC3 0x83 0x83 0x83 0x06 0x04 0x00 0x00\n\t\n\t0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00\n\t0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 \n\t\n\t0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00\n\t0x00 0x00 0x00 0x64 0x54 0x64 0x46 0x00 #-PL\n\t\n\t#--------------------------------------\n\t0x00 0x00 0x76 0x24 0x22 0x26 0x00 0x00 #--TS\n\t0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00\n\t\n\t0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00\n\t0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00\n\t\n\t0x00 0x00 0x00 0x00 0x01 0x01 0x0F 0x1F # a\n\t0x00 0x00 0x00 0x00 0x00 0x01 0x05 0x0F\n\t\n\t0x3B 0x33 0x33 0x72 0x62 0x62 0x62 0x62\n\t0x1F 0x3B 0x33 0x33 0x33 0x73 0x63 0x63\n\t\n\t0x62 0x62 0x62 0x62 0x63 0x21 0x35 0x35 \n\t0x63 0x63 0x63 0x63 0x63 0x63 0x67 0x27\n\t\n\t0x3C 0x1C 0x18 0x08 0x08 0x00 0x00 0x00\n\t0x35 0x3D 0x3D 0x1C 0x08 0x08 0x00 0x00\n\t\n\t0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00\n\t0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 \n\t\n\t0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00\n\t0x00 0x00 0x00 0x4A 0xAA 0xE4 0xA4 0x00 #-AL\n\t\n\t#--------------------------------------\n\t0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00\n\t0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00\n\t\n\t0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00\n\t0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00\n\t\n\t0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00\n\t0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00\n\t\n\t0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00\n\t0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00\n\t\n\t0x00 0x00 0x00 0x00 0x00 0x00 0x90 0x90\n\t0x00 0x00 0x00 0x00 0x00 0x00 0x10 0x10\n\t\n\t0xE0 0xE0 0xC0 0x40 0x00 0x00 0x00 0x00\n\t0xB0 0xE0 0xE0 0xC0 0xC0 0x00 0x00 0x00\n\t\n\t0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00\n\t0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00\n\t\n\t0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00\n\t0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00\n\t\n\t\n\t\n\t\n\n\n### AUDIO\n\n: audio-step\n3 5 32 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 \n\n: audio-note\n255 0 255 0 255 0 255 0 255 0 255 0 255 0 255 0\n\n: audio-hit\n0x5B 0x3A 0xC5 0xC2 0x18 0x2B 0x61 0x83 0x86 0x80 0x00 0x00 0x00 0x00 0x00 0x00\n\n: audio-hurt\n0xDC 0x09 0x9A 0xBD 0x7E 0x04 0x05 0x7A 0x78 0x4A 0x57 0x40 0x85 0xFA 0x12 0x80\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n","options":{"tickrate":20000,"fillColor":"#FF00FF","fillColor2":"#00FFFF","blendColor":"#FFFFFF","backgroundColor":"#000000","buzzColor":"#000000","quietColor":"#000000","shiftQuirks":false,"loadStoreQuirks":true,"vfOrderQuirks":false,"clipQuirks":false,"vBlankQuirks":false,"jumpQuirks":false,"screenRotation":0,"maxSize":"65024","touchInputMode":"vip","logicQuirks":false,"fontStyle":"octo","displayScale":"6"},"rom":[18,231,1,0,0,1,0,0,0,5,5,10,0,0,0,0,64,160,224,160,160,128,128,192,160,192,96,128,128,128,96,192,160,160,160,192,224,128,224,128,224,96,64,224,64,64,224,128,128,160,224,128,128,192,160,160,64,0,64,64,64,224,64,64,64,192,160,160,192,160,160,128,128,128,128,224,0,0,192,160,160,0,224,160,224,0,192,160,192,128,128,224,160,160,192,32,0,0,192,128,128,192,128,192,64,192,224,64,64,64,64,0,0,160,160,224,160,160,160,160,64,0,160,64,160,0,160,160,64,64,64,224,32,64,128,224,64,64,64,0,64,0,0,0,0,64,192,32,96,0,64,64,192,64,64,224,192,32,96,128,224,192,32,192,32,192,32,160,224,32,32,224,128,192,32,192,96,128,224,160,224,224,32,64,224,64,224,160,64,160,224,224,160,224,32,32,224,160,160,160,224,0,64,0,64,0,64,128,128,128,64,64,32,32,32,64,32,64,64,128,128,240,168,168,168,168,136,168,168,168,80,0,255,96,26,97,0,98,8,240,0,32,173,64,106,19,15,241,1,208,24,242,30,242,1,208,24,242,30,113,8,49,64,19,13,97,0,112,8,18,243,96,6,224,161,19,23,19,17,241,1,0,224,242,1,0,224,111,5,47,31,240,0,27,67,96,0,97,2,241,1,208,18,242,1,208,18,240,0,27,69,96,60,97,2,241,1,208,18,242,1,208,18,240,0,27,75,96,4,97,1,64,60,19,97,241,1,208,17,242,1,208,17,112,8,111,64,143,23,79,0,19,75,240,0,27,76,96,1,97,4,65,60,19,139,241,1,208,17,242,1,208,17,96,60,112,2,241,1,208,17,242,1,208,17,96,1,113,1,111,1,47,31,19,105,240,0,27,71,96,0,97,60,241,1,208,18,242,1,208,18,240,0,27,73,96,60,97,60,241,1,208,18,242,1,208,18,240,0,27,75,96,4,97,62,64,60,19,201,241,1,208,17,242,1,208,17,112,8,111,64,143,23,79,0,19,179,96,66,130,0,97,1,241,1,47,41,97,8,96,66,242,1,162,101,208,21,112,4,162,106,208,21,112,4,162,96,208,21,112,4,162,201,208,21,112,4,112,3,162,151,208,21,112,4,240,0,26,133,241,1,96,28,97,28,208,24,98,8,242,30,242,1,208,24,103,0,102,0,71,24,20,29,240,0,24,5,42,245,20,17,162,9,88,147,44,175,44,83,131,128,132,144,103,0,110,0,96,1,224,158,20,199,110,1,241,1,96,60,112,5,97,15,162,31,208,21,112,4,162,56,208,21,112,4,162,96,208,21,112,4,162,36,208,21,112,4,162,26,208,21,112,4,162,106,208,21,112,4,162,56,208,21,112,4,162,81,208,21,112,4,162,76,208,21,112,4,162,146,208,21,112,4,113,7,96,66,96,60,112,5,162,206,208,21,112,4,162,161,208,21,112,4,162,211,208,21,112,4,112,3,162,106,208,21,112,4,162,81,208,21,112,4,112,3,162,26,208,21,112,4,162,16,208,21,112,4,162,76,208,21,112,4,162,26,208,21,112,4,162,36,208,21,112,4,162,71,208,21,112,4,96,2,224,158,20,205,96,5,224,158,20,219,116,255,103,1,78,1,110,2,96,7,224,158,20,233,115,255,103,1,78,1,110,2,96,8,224,158,20,247,116,1,103,1,78,1,110,2,96,9,224,158,21,5,115,1,103,1,78,1,110,2,96,4,224,158,21,15,62,1,103,1,62,1,21,173,96,3,224,158,21,173,110,0,241,1,96,60,112,5,97,15,162,31,208,21,112,4,162,56,208,21,112,4,162,96,208,21,112,4,162,36,208,21,112,4,162,26,208,21,112,4,162,106,208,21,112,4,162,56,208,21,112,4,162,81,208,21,112,4,162,76,208,21,112,4,162,146,208,21,112,4,113,7,96,66,96,60,112,5,162,206,208,21,112,4,162,161,208,21,112,4,162,211,208,21,112,4,112,3,162,106,208,21,112,4,162,81,208,21,112,4,112,3,162,26,208,21,112,4,162,16,208,21,112,4,162,76,208,21,112,4,162,26,208,21,112,4,162,36,208,21,112,4,162,71,208,21,112,4,62,2,22,71,241,1,96,60,112,5,97,15,162,31,208,21,112,4,162,56,208,21,112,4,162,96,208,21,112,4,162,36,208,21,112,4,162,26,208,21,112,4,162,106,208,21,112,4,162,56,208,21,112,4,162,81,208,21,112,4,162,76,208,21,112,4,162,146,208,21,112,4,113,7,96,66,96,60,112,5,162,206,208,21,112,4,162,161,208,21,112,4,162,211,208,21,112,4,112,3,162,106,208,21,112,4,162,81,208,21,112,4,112,3,162,26,208,21,112,4,162,16,208,21,112,4,162,76,208,21,112,4,162,26,208,21,112,4,162,36,208,21,112,4,162,71,208,21,112,4,110,0,103,2,62,0,20,205,71,0,26,97,138,48,139,64,108,0,71,1,43,85,55,2,22,95,109,0,77,2,26,73,162,9,88,147,138,48,139,64,162,12,90,178,44,175,44,83,55,1,22,247,162,12,88,147,138,128,139,144,43,13,62,5,22,197,103,0,102,0,57,3,22,157,104,12,105,81,71,24,22,157,240,0,24,77,42,245,22,145,57,5,22,177,104,12,105,55,71,24,22,177,240,0,24,29,42,245,22,165,57,13,22,197,104,12,105,25,71,24,22,197,240,0,24,53,42,245,22,185,62,6,22,241,103,0,102,0,71,24,22,217,240,0,24,5,42,245,22,205,57,81,22,225,104,12,105,4,57,55,22,233,104,19,105,5,57,25,22,241,104,11,105,13,162,9,88,146,103,0,44,175,55,2,25,13,103,0,162,12,90,179,175,223,247,30,243,101,81,176,25,5,80,160,25,5,136,32,137,48,44,83,162,12,90,179,130,128,131,144,162,9,88,147,133,160,133,133,117,3,133,84,133,84,133,84,117,4,134,176,134,149,118,3,134,100,134,100,134,100,118,4,240,0,27,5,241,1,213,104,240,0,37,209,108,40,109,15,252,58,240,2,253,24,111,9,47,31,240,0,27,5,213,104,136,32,137,48,44,83,162,12,241,101,90,179,130,128,131,144,162,9,88,147,162,14,95,243,63,1,23,127,100,7,23,129,100,1,131,69,111,100,143,53,63,0,24,251,50,1,23,197,109,0,108,2,241,1,47,41,162,2,242,101,130,196,111,9,143,37,63,0,23,169,114,246,113,1,129,212,111,9,143,21,63,0,23,183,113,246,112,1,162,5,95,243,144,240,242,101,162,2,242,85,47,41,50,2,23,255,109,0,108,4,241,1,47,41,162,2,242,101,130,196,111,9,143,37,63,0,23,227,114,246,113,1,129,212,111,9,143,21,63,0,23,241,113,246,112,1,162,5,95,243,144,240,242,101,162,2,242,85,47,41,50,3,24,57,109,0,108,7,241,1,47,41,162,2,242,101,130,196,111,9,143,37,63,0,24,29,114,246,113,1,129,212,111,9,143,21,63,0,24,43,113,246,112,1,162,5,95,243,144,240,242,101,162,2,242,85,47,41,50,4,24,115,109,0,108,1,241,1,47,41,162,2,242,101,130,196,111,9,143,37,63,0,24,87,114,246,113,1,129,212,111,9,143,21,63,0,24,101,113,246,112,1,162,5,95,243,144,240,242,101,162,2,242,85,47,41,50,5,24,173,109,1,108,0,241,1,47,41,162,2,242,101,130,196,111,9,143,37,63,0,24,145,114,246,113,1,129,212,111,9,143,21,63,0,24,159,113,246,112,1,162,5,95,243,144,240,242,101,162,2,242,85,47,41,50,6,24,245,109,2,109,5,241,1,47,41,162,2,242,101,130,196,111,9,143,37,63,0,24,203,114,246,113,1,129,212,111,9,143,21,63,0,24,217,113,246,112,1,162,5,95,243,144,240,242,101,162,2,242,85,47,41,44,175,162,12,90,179,43,13,110,9,94,226,44,175,96,0,97,0,98,0,175,223,247,30,243,85,103,32,119,252,119,4,55,32,23,3,103,0,175,223,247,30,90,195,76,0,25,119,83,67,132,149,116,5,111,10,143,71,63,0,25,119,131,133,115,5,111,10,143,55,63,0,25,119,111,5,143,69,63,0,25,65,123,255,43,85,77,2,123,1,111,5,143,71,63,0,25,81,123,1,43,85,77,2,123,255,111,5,143,53,63,0,25,97,122,255,43,85,77,2,122,1,111,5,143,55,63,0,25,113,122,1,43,85,77,2,122,255,175,223,247,30,90,178,119,4,55,32,25,13,44,83,240,0,37,173,98,3,97,34,241,58,240,2,242,24,138,128,139,144,43,13,62,9,26,73,110,10,94,226,57,33,25,207,96,66,112,19,97,8,242,1,162,151,208,21,112,4,112,252,162,181,208,21,112,4,162,14,111,1,95,242,240,0,27,13,97,50,96,66,241,1,208,26,98,10,242,30,242,1,208,26,57,46,26,3,241,1,47,41,162,2,240,101,112,1,240,85,162,5,240,101,112,1,240,85,162,15,96,1,240,85,47,41,97,50,240,0,27,33,96,75,241,1,208,24,98,8,242,30,242,1,208,24,111,58,143,149,63,0,26,45,44,175,240,0,27,49,97,50,96,84,97,50,241,1,208,25,98,9,242,30,242,1,208,25,162,11,240,101,112,1,240,85,44,175,240,0,37,193,97,96,98,12,241,58,240,2,242,24,111,7,47,31,97,120,241,58,240,2,242,24,110,0,131,128,132,144,103,1,62,8,26,87,111,60,26,89,111,14,47,31,103,0,62,8,110,0,62,8,20,45,44,175,44,83,240,0,26,133,241,1,96,28,97,28,208,24,98,8,242,30,242,1,208,24,96,4,97,4,98,8,240,0,27,77,241,1,208,24,242,30,242,1,208,24,242,30,113,8,49,52,26,135,99,0,240,0,27,173,97,4,112,8,241,1,208,24,242,30,242,1,208,24,242,30,113,8,49,52,26,163,115,1,51,3,26,159,240,0,28,205,112,8,97,4,241,1,208,24,242,30,242,1,208,24,242,30,113,8,49,52,26,195,112,8,48,60,26,193,240,0,29,237,96,4,241,1,208,24,242,30,242,1,208,24,242,30,112,8,48,60,26,225,45,151,247,30,242,101,175,255,242,30,242,30,83,67,175,223,246,30,244,85,119,3,118,4,0,238,141,176,111,58,143,181,63,0,27,31,240,0,21,149,125,197,27,67,111,40,143,181,63,0,27,47,240,0,19,229,125,215,27,67,111,18,143,181,63,0,27,63,240,0,17,213,125,237,27,67,240,0,16,13,141,212,141,212,141,212,253,30,253,30,253,30,250,30,94,227,0,238,43,13,162,11,85,83,109,0,76,4,110,0,143,80,143,229,79,0,28,79,110,0,175,223,254,30,85,99,154,80,125,1,155,96,125,1,61,2,109,0,61,2,27,133,110,32,126,252,126,4,62,32,27,107,76,0,28,77,77,2,28,77,162,9,88,147,154,128,125,1,155,144,125,1,61,2,109,0,61,2,28,77,175,255,252,30,252,30,111,1,255,30,94,227,162,15,95,243,63,1,27,197,126,246,111,200,143,229,79,0,110,0,241,1,47,41,162,2,242,101,111,9,143,229,63,0,27,217,126,246,113,255,130,229,111,200,143,37,63,0,28,1,114,10,113,255,111,200,143,21,63,0,28,1,97,9,112,255,111,200,143,5,63,0,28,1,96,0,97,0,98,0,242,85,48,0,28,19,49,0,28,19,50,0,28,19,47,41,45,17,47,41,242,1,47,41,240,0,37,225,97,64,98,15,241,58,240,2,242,24,44,83,96,28,97,28,241,1,240,0,27,5,208,24,111,9,47,31,44,83,96,28,97,28,241,1,240,0,27,5,208,24,242,1,47,41,109,2,28,81,109,2,0,238,101,0,162,9,90,179,175,223,245,30,242,101,128,165,112,3,111,7,143,7,63,0,28,167,128,4,128,4,128,4,112,4,129,181,113,3,111,7,143,23,63,0,28,167,129,20,129,20,129,20,113,4,90,179,44,229,240,0,26,165,114,255,130,36,130,36,130,36,130,36,242,30,241,1,208,24,98,8,242,30,242,1,208,24,117,4,53,32,28,85,0,238,96,4,97,4,162,9,90,179,122,253,123,253,98,0,65,60,28,227,64,60,28,217,155,144,114,1,154,128,114,1,50,2,44,229,98,0,122,1,112,8,28,193,96,4,122,249,123,1,113,8,28,189,0,238,43,13,62,11,28,243,162,11,92,195,76,11,110,4,240,0,24,101,142,228,142,228,254,30,254,30,254,30,254,30,241,1,208,24,108,8,252,30,242,1,208,24,0,238,44,83,240,0,26,133,241,1,96,28,97,28,208,24,98,8,242,30,242,1,208,24,240,0,26,149,241,1,96,28,97,28,208,24,98,8,242,30,242,1,208,24,111,100,47,31,240,0,26,149,241,1,96,28,97,28,208,24,98,8,242,30,242,1,208,24,44,175,44,83,240,0,30,93,96,4,112,8,98,8,113,8,97,4,241,1,208,24,242,30,242,1,208,24,242,30,113,8,49,52,29,101,112,8,48,52,29,97,240,0,32,61,96,4,241,1,208,24,242,30,242,1,208,24,242,30,112,8,48,60,29,131,45,151,241,1,96,60,112,5,97,30,162,86,208,21,112,4,162,71,208,21,112,4,162,36,208,21,112,4,162,16,208,21,112,4,162,101,208,21,112,4,162,36,208,21,112,4,112,3,162,96,208,21,112,4,162,36,208,21,112,4,162,101,208,21,112,4,162,36,208,21,112,4,162,106,208,21,112,4,113,7,96,66,96,60,112,5,162,106,208,21,112,4,162,81,208,21,112,4,112,3,162,86,208,21,112,4,162,71,208,21,112,4,162,16,208,21,112,4,162,126,208,21,112,4,112,3,162,16,208,21,112,4,162,46,208,21,112,4,162,16,208,21,112,4,162,56,208,21,112,4,162,76,208,21,112,4,242,1,96,60,112,5,97,30,162,86,208,21,112,4,162,71,208,21,112,4,162,36,208,21,112,4,162,16,208,21,112,4,162,101,208,21,112,4,162,36,208,21,112,4,112,3,162,96,208,21,112,4,162,36,208,21,112,4,162,101,208,21,112,4,162,36,208,21,112,4,162,106,208,21,112,4,113,7,96,66,111,7,47,31,96,60,112,5,97,30,162,86,208,21,112,4,162,71,208,21,112,4,162,36,208,21,112,4,162,16,208,21,112,4,162,101,208,21,112,4,162,36,208,21,112,4,112,3,162,96,208,21,112,4,162,36,208,21,112,4,162,101,208,21,112,4,162,36,208,21,112,4,162,106,208,21,112,4,113,7,96,66,96,60,112,5,162,106,208,21,112,4,162,81,208,21,112,4,112,3,162,86,208,21,112,4,162,71,208,21,112,4,162,16,208,21,112,4,162,126,208,21,112,4,112,3,162,16,208,21,112,4,162,46,208,21,112,4,162,16,208,21,112,4,162,56,208,21,112,4,162,76,208,21,112,4,30,129,255,21,255,7,63,0,31,33,0,238,96,60,112,6,97,1,162,51,208,21,112,4,162,86,208,21,112,4,162,201,208,21,112,4,162,2,82,35,47,121,162,2,241,30,82,35,47,121,162,2,241,30,241,30,82,35,47,121,162,216,208,21,112,4,162,5,82,35,47,121,162,5,241,30,82,35,47,121,162,5,241,30,241,30,82,35,47,121,0,238,50,0,31,131,162,196,208,21,112,4,50,1,31,141,162,151,208,21,112,4,50,2,31,151,162,156,208,21,112,4,50,3,31,161,162,161,208,21,112,4,50,4,31,171,162,166,208,21,112,4,50,5,31,181,162,171,208,21,112,4,50,6,31,191,162,176,208,21,112,4,50,7,31,201,162,181,208,21,112,4,50,8,31,211,162,186,208,21,112,4,50,9,31,221,162,191,208,21,112,4,0,238,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,2,2,15,5,1,15,10,12,30,17,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,31,31,31,31,31,31,31,31,13,13,13,13,13,13,13,13,13,13,19,20,21,22,23,13,31,31,31,31,31,31,31,31,13,13,13,13,28,28,28,13,13,15,24,25,15,26,27,15,31,31,31,31,31,31,31,31,13,13,13,28,1,1,1,13,13,14,1,15,5,15,1,14,31,31,31,31,31,31,31,31,13,13,13,1,1,30,1,13,13,29,15,14,2,14,15,29,31,31,31,31,31,31,31,31,13,13,13,1,1,2,1,28,28,13,29,29,3,29,29,13,31,31,31,5,31,31,31,31,13,13,13,1,1,2,1,1,1,13,13,28,3,28,28,28,31,2,2,2,2,2,31,31,13,13,13,1,1,2,2,1,1,13,13,1,2,1,1,1,31,2,29,29,1,2,31,31,13,13,13,1,1,1,2,1,1,28,13,1,2,2,2,2,2,2,31,31,29,2,31,31,13,13,13,29,1,1,2,1,1,1,13,29,29,29,29,1,7,7,7,7,7,2,13,13,13,13,13,13,1,1,2,1,1,1,28,31,31,31,31,31,29,7,7,7,7,2,13,13,13,13,13,13,1,1,2,1,1,2,2,2,2,2,1,1,7,7,7,7,1,2,13,13,13,13,13,13,1,1,2,1,1,2,16,17,18,2,1,1,1,1,1,1,1,2,13,13,13,13,13,13,29,1,2,2,2,2,12,5,12,2,2,2,2,2,2,2,2,2,13,13,13,13,13,13,13,1,1,1,1,2,2,2,2,2,1,1,1,7,1,1,7,7,13,13,13,13,13,13,13,29,29,29,1,1,1,1,1,1,1,29,29,29,7,7,7,29,13,13,13,13,13,13,13,13,13,13,29,29,29,29,29,29,29,13,13,13,29,29,29,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,13,13,13,13,13,13,13,13,13,32,32,32,32,32,0,0,0,0,0,32,32,32,32,32,13,13,13,13,13,13,13,13,13,32,32,32,0,0,0,12,0,12,0,0,0,32,32,32,13,13,13,13,13,13,13,13,13,32,32,0,0,0,0,0,0,0,0,0,0,0,32,32,13,13,13,13,13,13,13,13,13,32,0,0,0,32,0,12,0,12,0,32,0,0,0,32,13,13,13,13,13,13,13,13,13,32,0,0,32,32,0,0,0,0,0,32,32,0,0,32,13,13,13,13,13,13,13,13,13,32,0,0,32,32,32,32,6,32,32,32,32,0,0,32,13,13,13,13,13,13,13,13,13,32,0,0,32,32,32,32,32,32,32,32,32,0,0,32,13,13,13,13,13,13,13,13,13,32,0,0,0,32,32,32,32,32,32,32,0,0,0,32,13,13,13,13,13,13,13,13,13,32,32,0,0,0,32,32,32,32,32,0,0,0,32,32,13,13,13,13,13,13,13,13,13,32,32,0,12,0,0,0,0,0,0,0,12,0,32,32,13,13,13,13,13,13,13,13,13,32,32,0,0,0,32,32,32,32,32,0,0,0,32,32,13,13,13,13,13,13,13,13,13,32,0,0,0,32,32,32,32,32,32,32,0,0,0,32,13,13,13,13,13,13,13,13,13,32,0,0,32,32,32,0,0,0,32,32,32,0,0,32,13,13,13,13,13,13,13,13,13,32,0,0,32,32,32,0,9,0,32,32,32,0,0,32,13,13,13,13,13,13,13,13,13,32,0,0,32,32,32,0,0,0,32,32,32,0,0,32,13,13,13,13,13,13,13,13,13,32,0,0,0,32,32,32,0,32,32,32,0,0,0,32,13,13,13,13,13,13,13,13,13,32,32,0,0,0,0,0,0,0,0,0,0,0,32,32,13,13,13,13,13,13,13,13,13,32,32,32,0,0,0,0,0,0,0,0,0,32,32,32,13,13,13,13,13,13,13,13,13,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,29,29,13,13,29,29,29,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,1,1,13,13,1,1,1,13,13,13,13,29,29,29,29,29,29,13,13,13,13,13,13,29,1,1,13,29,1,13,1,13,13,13,13,1,1,1,1,1,1,29,13,13,13,13,13,1,1,1,13,1,1,13,1,29,29,29,13,1,1,13,29,1,1,1,13,13,13,13,13,1,1,29,13,1,29,13,1,1,1,1,29,29,1,13,1,1,1,1,13,13,13,13,13,1,1,31,13,1,1,29,29,29,9,29,1,1,1,13,1,29,29,29,13,13,13,13,13,1,1,1,13,1,1,1,1,1,29,1,1,1,1,13,1,1,1,1,13,13,13,13,13,13,1,1,29,13,1,1,1,1,1,1,1,1,13,13,13,13,1,1,13,13,13,13,13,13,1,1,1,29,13,29,29,29,29,29,29,29,13,13,13,29,1,1,13,13,13,13,13,13,1,1,1,1,29,1,1,1,1,1,1,1,29,13,13,1,1,1,13,13,13,13,13,13,13,13,1,1,1,1,1,1,1,1,1,1,1,29,29,1,1,13,13,13,13,13,13,13,13,13,13,13,13,13,13,1,29,13,13,1,1,1,1,1,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,1,1,13,13,13,1,1,1,1,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,1,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,6,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,33,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,33,8,33,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,33,0,4,0,33,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,33,0,0,4,0,0,33,13,13,13,13,13,13,13,13,13,13,13,33,33,33,33,33,33,33,33,33,11,33,33,33,33,33,33,33,33,33,13,13,13,13,13,33,0,4,0,33,33,0,0,0,4,0,0,0,33,33,0,4,0,33,13,13,13,13,13,33,0,4,0,0,0,0,0,0,4,0,0,0,0,0,0,4,0,33,13,13,13,13,13,33,0,4,0,33,33,0,0,0,4,0,0,0,33,33,0,4,0,33,13,13,13,13,13,33,0,4,0,33,33,0,0,0,4,0,0,0,33,33,0,4,0,33,13,13,13,13,13,33,0,4,0,33,33,33,33,33,4,33,33,33,33,33,0,4,0,33,13,13,13,13,13,33,0,4,0,33,0,0,0,0,4,0,0,0,0,33,0,4,0,33,13,13,13,13,13,33,0,4,0,33,0,12,0,33,33,33,0,12,0,33,0,4,0,33,13,13,13,13,13,33,0,4,0,33,0,0,0,0,12,0,0,0,0,33,0,4,0,33,13,13,13,13,13,33,0,4,0,33,0,0,0,0,0,0,0,0,0,33,0,4,0,33,13,13,13,13,13,33,0,4,0,33,33,33,0,33,33,33,0,33,33,33,0,4,0,33,13,13,13,13,13,33,0,4,0,33,33,0,0,0,4,0,0,0,33,33,0,4,0,33,13,13,13,13,13,33,0,4,0,33,33,0,12,0,4,0,12,0,33,33,0,4,0,33,13,13,13,13,13,33,0,4,0,33,33,0,0,0,4,0,0,0,33,33,0,4,0,33,13,13,13,13,13,33,0,4,0,0,0,0,12,0,4,0,12,0,0,0,0,4,0,33,13,13,13,13,13,33,0,4,0,33,33,0,0,0,4,0,0,0,33,33,0,4,0,33,13,13,13,13,13,33,0,4,0,33,33,0,12,0,4,0,12,0,33,33,0,4,0,33,13,13,13,13,13,33,33,33,33,33,33,0,0,0,4,0,0,0,33,33,33,33,33,33,13,13,13,13,13,13,13,13,13,13,33,33,33,33,6,33,33,33,33,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,6,10,1,7,14,1,15,14,1,20,7,2,11,7,2,0,0,0,0,0,0,0,0,0,11,50,3,19,52,3,4,42,3,13,45,3,15,47,3,2,51,4,21,44,4,13,41,4,8,27,2,16,27,2,12,29,2,8,36,2,16,36,2,12,33,2,0,0,0,0,0,0,12,66,6,12,69,5,5,71,5,19,71,5,11,74,5,13,74,5,10,72,5,14,72,5,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,32,0,0,2,0,64,0,12,192,2,96,0,6,32,128,12,192,2,96,0,6,32,128,129,129,129,129,129,129,129,129,189,189,129,189,189,129,189,129,66,66,66,66,66,66,66,66,126,126,126,126,126,126,126,126,0,24,36,66,66,66,66,0,0,24,36,66,66,66,66,0,0,0,24,60,60,60,60,0,0,0,24,60,60,60,60,0,170,190,205,126,237,239,119,238,0,36,72,72,68,34,34,68,0,34,113,90,177,132,32,110,14,62,41,90,177,244,56,110,0,124,62,8,62,62,62,0,0,252,126,128,246,254,126,0,0,48,0,0,62,62,62,0,0,0,252,130,254,254,126,0,0,126,126,126,118,118,126,0,0,126,66,66,66,66,66,0,255,126,60,60,60,60,126,255,255,0,40,40,40,40,0,255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,126,12,126,24,126,48,126,0,0,0,0,0,0,0,0,153,255,0,126,60,126,60,126,0,0,0,0,16,16,0,0,0,0,0,3,12,51,207,63,0,0,0,0,0,0,0,0,0,60,219,60,255,255,255,255,0,0,24,36,24,36,24,0,0,0,0,192,48,204,243,252,0,0,0,0,0,0,0,0,0,0,0,0,0,1,3,7,0,0,0,0,0,0,0,0,0,7,31,127,255,255,255,254,0,0,0,0,0,0,0,0,199,211,204,207,204,195,199,0,0,16,16,16,16,16,16,0,0,224,120,126,255,255,255,127,0,0,0,0,0,0,0,0,0,0,0,0,0,128,192,224,0,0,0,0,0,0,0,0,0,15,15,0,31,0,0,0,0,0,0,0,0,0,255,0,0,254,254,0,255,0,0,0,0,0,0,0,0,0,255,0,0,127,127,0,255,0,0,0,0,0,0,0,0,0,255,0,0,240,240,0,248,0,0,0,0,0,0,0,0,0,255,0,0,0,0,0,0,0,206,179,0,0,0,0,0,0,0,0,16,173,102,17,85,68,17,68,0,0,0,0,0,0,0,0,28,28,16,219,255,126,102,102,12,12,0,219,255,0,102,102,68,21,81,85,84,4,69,81,0,0,0,0,0,0,0,0,238,0,187,0,119,0,221,0,0,0,0,0,0,0,0,0,255,255,255,255,255,255,255,255,238,0,187,0,119,0,221,0,2,50,122,106,183,130,34,194,2,50,82,106,176,232,46,192,8,255,8,32,166,143,67,12,0,240,0,32,166,191,127,14,0,60,57,118,104,70,32,0,0,20,0,0,0,0,0,0,0,14,31,63,12,95,92,63,0,0,0,0,0,87,84,7,0,62,127,255,255,255,94,85,0,54,91,235,171,235,20,21,56,124,186,186,124,68,84,56,56,124,186,146,124,0,84,56,12,30,63,128,158,108,146,126,12,30,3,138,142,4,128,88,24,60,126,255,24,60,189,102,24,60,126,255,36,189,153,0,255,255,255,255,255,255,255,255,16,24,16,24,16,24,60,24,8,24,1,130,65,130,64,0,60,8,24,24,24,60,102,219,211,102,255,126,0,60,126,126,126,126,60,0,8,28,62,20,28,8,24,8,24,8,28,62,0,28,8,8,8,8,48,32,192,64,32,48,64,192,255,128,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,28,28,28,28,28,28,60,60,28,28,28,28,28,28,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,255,255,24,56,126,127,60,24,0,0,0,56,126,127,63,7,25,0,0,0,3,7,7,12,3,0,0,0,3,7,7,12,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,15,31,31,0,0,0,0,3,15,31,31,63,63,63,126,127,127,127,126,63,63,63,126,126,126,126,126,63,63,63,31,31,143,7,121,63,63,63,31,31,143,7,255,252,252,0,1,231,255,255,126,255,252,0,1,231,255,255,126,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,126,255,255,255,255,0,0,0,126,255,255,255,255,254,60,29,222,62,60,30,24,254,60,28,28,28,28,30,24,55,236,232,232,232,236,231,240,55,236,232,232,232,236,231,241,1,99,241,225,192,192,128,0,119,115,241,225,192,192,128,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,3,15,31,31,3,7,7,15,15,15,31,31,57,49,48,118,185,217,225,232,57,49,48,112,176,208,224,232,119,118,181,122,122,122,123,249,119,118,53,58,58,58,123,253,120,184,80,80,80,168,72,152,126,191,95,95,95,191,91,184,156,207,199,224,252,127,15,1,156,207,199,224,252,127,15,1,0,0,0,0,0,0,0,0,31,63,63,127,255,255,255,255,0,0,0,124,255,255,255,255,255,255,255,255,255,255,255,255,249,248,240,246,249,249,248,240,249,248,240,240,240,240,240,240,25,239,55,23,23,23,55,239,25,239,55,23,23,23,55,239,0,0,30,63,39,3,3,1,31,255,255,255,255,255,255,255,241,248,28,102,114,56,142,224,241,248,252,230,114,56,142,224,6,6,12,12,12,4,4,6,242,242,244,244,244,252,252,250,6,3,1,0,128,224,240,248,250,249,248,248,248,248,252,252,252,252,254,254,254,254,254,254,252,252,254,254,254,254,254,254,252,252,248,248,240,224,192,1,252,252,248,248,240,224,224,241,3,3,3,3,1,143,175,238,243,243,251,251,249,255,255,238,224,192,0,0,0,0,0,0,224,192,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,128,192,96,48,48,24,0,0,128,64,32,16,16,8,24,12,12,12,24,24,48,48,8,4,4,4,8,8,16,16,96,96,96,96,96,96,48,152,32,32,32,32,32,32,16,136,192,96,32,128,128,128,0,0,192,96,32,128,128,128,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,12,31,27,25,29,10,13,0,30,18,18,18,20,26,0,0,12,127,245,254,244,245,118,0,173,169,173,168,168,237,0,0,24,221,25,217,200,72,200,0,185,17,145,145,145,145,0,0,201,251,159,159,142,202,238,0,221,21,21,21,21,221,0,0,18,43,206,172,159,138,138,0,22,181,85,22,20,20,0,0,12,46,228,238,100,68,54,0,77,72,76,72,72,108,0,0,218,255,203,221,73,74,77,0,218,146,154,146,144,154,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,7,7,15,0,0,0,0,3,7,7,15,15,14,142,254,60,0,0,0,63,127,255,254,60,67,63,31,0,0,0,0,0,0,0,0,7,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,7,60,0,0,0,0,0,0,0,0,255,0,3,31,0,1,0,0,0,0,64,124,27,199,207,239,0,0,64,124,26,199,255,238,223,221,219,87,15,14,30,31,223,221,219,87,15,238,254,255,15,3,0,0,0,0,0,0,239,243,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,128,0,0,0,0,0,0,0,0,0,255,63,192,248,112,254,28,48,0,0,127,191,127,239,223,255,0,0,111,7,15,15,15,71,255,253,249,227,103,246,126,0,111,253,249,225,97,242,126,128,248,254,3,0,0,0,0,0,255,255,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,6,14,14,6,0,0,0,0,0,0,0,0,7,7,3,15,31,27,3,3,224,192,0,0,0,3,3,3,1,1,129,241,249,252,252,188,1,1,129,241,249,252,255,188,141,197,229,185,125,226,198,120,141,133,197,185,125,226,199,120,0,0,128,0,0,0,0,0,135,255,224,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,48,240,192,128,128,192,192,0,0,0,0,128,128,192,192,192,192,192,224,224,224,224,224,192,192,192,224,224,224,240,224,0,128,192,192,96,96,192,0,252,254,255,255,127,254,220,56,0,0,0,0,0,0,0,0,224,0,0,0,0,0,0,0,10,31,24,30,27,11,13,15,30,16,16,22,18,18,30,0,49,89,101,85,125,45,37,36,49,73,73,121,73,73,73,0,19,43,73,43,27,25,8,9,19,178,82,19,18,18,19,0,129,195,3,3,195,1,129,193,131,2,2,130,2,2,131,0,136,172,100,100,99,98,161,225,200,72,72,69,69,66,194,0,156,94,72,88,158,136,4,14,156,144,144,28,16,16,28,0,224,240,72,104,176,192,80,72,224,144,144,224,192,160,144,0,0,0,6,4,4,6,0,0,0,0,6,4,4,6,0,0,3,5,17,1,1,3,3,7,2,7,21,25,1,1,3,3,14,30,60,252,248,248,240,240,7,7,14,30,124,252,248,240,240,240,240,240,240,240,240,240,240,240,240,240,240,240,240,240,112,112,112,112,112,112,112,48,240,240,240,240,240,240,240,240,56,60,30,14,7,7,3,3,240,248,252,60,30,14,15,7,1,1,1,1,1,1,0,0,7,3,3,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,6,5,6,4,0,0,0,196,170,206,170,0,0,0,0,196,170,206,170,0,0,0,128,128,128,192,192,224,240,0,0,0,128,128,128,192,192,248,252,126,63,31,31,15,15,224,240,248,252,126,63,31,15,15,15,14,14,14,14,14,12,15,15,15,15,15,15,15,15,12,12,12,12,12,12,12,28,15,15,15,15,15,15,15,15,28,124,252,240,224,192,128,128,15,31,63,126,252,248,240,224,0,0,0,0,0,0,0,0,224,192,192,128,128,0,0,0,0,0,0,0,0,0,0,0,0,0,0,98,87,100,83,0,0,0,232,77,74,72,0,0,0,0,232,77,74,72,0,0,0,0,0,0,0,1,1,1,0,0,0,0,0,0,0,1,0,0,8,8,8,28,28,62,1,0,0,8,8,8,28,28,54,114,99,97,97,97,97,96,30,54,55,51,99,97,97,98,96,32,33,33,51,54,22,28,96,96,96,97,97,99,55,55,28,8,8,8,0,0,0,0,62,28,28,8,8,8,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,108,72,36,108,0,0,0,146,171,186,170,0,0,0,0,146,171,186,170,0,0,2,2,2,2,3,243,255,143,0,0,2,2,2,98,251,255,131,195,67,35,3,3,3,3,143,195,195,99,3,3,3,3,1,1,1,1,1,1,1,1,3,3,3,3,3,3,3,3,1,3,3,3,3,2,2,6,3,3,3,3,3,3,3,3,70,70,36,20,24,0,0,0,3,71,102,54,60,24,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,73,93,16,12,0,0,0,92,80,212,92,0,0,0,0,92,80,212,92,0,0,0,0,0,0,0,8,4,248,0,0,0,0,0,8,4,252,0,0,1,1,129,131,131,134,0,0,0,1,1,1,3,3,134,142,140,140,140,140,140,140,6,134,134,142,140,140,140,140,12,4,4,4,6,6,2,3,140,140,140,140,140,140,134,6,3,1,1,1,0,0,0,0,7,3,3,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,21,37,33,65,0,0,0,102,85,102,69,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,129,131,194,0,0,0,0,0,1,129,131,194,228,96,96,96,96,96,96,194,198,192,96,96,96,96,96,96,96,96,64,64,192,192,192,96,96,96,96,96,96,224,224,129,1,1,1,0,0,0,0,192,129,129,1,1,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,209,16,192,64,128,0,0,38,116,66,54,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,4,142,142,0,0,0,0,0,4,4,142,219,91,81,113,97,96,64,64,142,219,91,115,115,113,97,96,64,64,64,192,128,128,128,128,96,96,64,64,192,192,192,192,129,1,1,1,0,0,0,0,192,129,129,129,1,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,220,148,148,156,0,0,0,73,237,139,105,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8,8,12,28,0,0,0,0,0,8,8,12,28,54,178,227,227,195,195,195,28,28,54,182,162,227,195,195,195,195,130,130,130,130,130,130,195,195,195,195,195,195,195,195,130,2,2,0,4,0,0,0,195,131,131,131,6,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,100,84,100,70,0,0,0,118,36,34,38,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,15,31,0,0,0,0,0,1,5,15,59,51,51,114,98,98,98,98,31,59,51,51,51,115,99,99,98,98,98,98,99,33,53,53,99,99,99,99,99,99,103,39,60,28,24,8,8,0,0,0,53,61,61,28,8,8,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,74,170,228,164,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,144,144,0,0,0,0,0,0,16,16,224,224,192,64,0,0,0,0,176,224,224,192,192,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,5,32,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,0,255,0,255,0,255,0,255,0,255,0,255,0,255,0,91,58,197,194,24,43,97,131,134,128,0,0,0,0,0,0,220,9,154,189,126,4,5,122,120,74,87,64,133,250,18,128]}</script>
<script>"use strict";

function invertKeymap(k) {
	return Object.keys(k).reduce((a,b) => {
		Object.keys(k[b]).forEach(x => a[x]=+b)
		return a
	}, {})
}

function getPref(key) {
	try { return JSON.parse(localStorage.getItem(key)) }
	catch(e) { console.log(e); return null }
}
function setPref(key, value) {
	try { localStorage.setItem(key, JSON.stringify(value)) }
	catch(e) { console.log(e); }
}

var keymap = (this.STATIC_KEYMAP) || getPref('octoKeymap') || {
	0x0: { x:1 },
	0x1: { 1:1 },
	0x2: { 2:1 },
	0x3: { 3:1 },
	0x4: { q:1 },
	0x5: { w:1, ArrowUp:1 },
	0x6: { e:1, ' ':1 },
	0x7: { a:1, ArrowLeft:1 },
	0x8: { s:1, ArrowDown:1 },
	0x9: { d:1, ArrowRight:1 },
	0xA: { z:1 },
	0xB: { c:1 },
	0xC: { 4:1 },
	0xD: { r:1 },
	0xE: { f:1 },
	0xF: { v:1 },
}

var keymapInverse = invertKeymap(keymap)

var smallfonts = {
	octo: [
		0xF0, 0x90, 0x90, 0x90, 0xF0, // 0
		0x20, 0x60, 0x20, 0x20, 0x70, // 1
		0xF0, 0x10, 0xF0, 0x80, 0xF0, // 2
		0xF0, 0x10, 0xF0, 0x10, 0xF0, // 3
		0x90, 0x90, 0xF0, 0x10, 0x10, // 4
		0xF0, 0x80, 0xF0, 0x10, 0xF0, // 5
		0xF0, 0x80, 0xF0, 0x90, 0xF0, // 6
		0xF0, 0x10, 0x20, 0x40, 0x40, // 7
		0xF0, 0x90, 0xF0, 0x90, 0xF0, // 8
		0xF0, 0x90, 0xF0, 0x10, 0xF0, // 9
		0xF0, 0x90, 0xF0, 0x90, 0x90, // A
		0xE0, 0x90, 0xE0, 0x90, 0xE0, // B
		0xF0, 0x80, 0x80, 0x80, 0xF0, // C
		0xE0, 0x90, 0x90, 0x90, 0xE0, // D
		0xF0, 0x80, 0xF0, 0x80, 0xF0, // E
		0xF0, 0x80, 0xF0, 0x80, 0x80, // F
	],
	vip: [
		0xF0, 0x90, 0x90, 0x90, 0xF0,
		0x60, 0x20, 0x20, 0x20, 0x70,
		0xF0, 0x10, 0xF0, 0x80, 0xF0,
		0xF0, 0x10, 0xF0, 0x10, 0xF0,
		0xA0, 0xA0, 0xF0, 0x20, 0x20,
		0xF0, 0x80, 0xF0, 0x10, 0xF0,
		0xF0, 0x80, 0xF0, 0x90, 0xF0,
		0xF0, 0x10, 0x10, 0x10, 0x10,
		0xF0, 0x90, 0xF0, 0x90, 0xF0,
		0xF0, 0x90, 0xF0, 0x10, 0xF0,
		0xF0, 0x90, 0xF0, 0x90, 0x90,
		0xF0, 0x50, 0x70, 0x50, 0xF0,
		0xF0, 0x80, 0x80, 0x80, 0xF0,
		0xF0, 0x50, 0x50, 0x50, 0xF0,
		0xF0, 0x80, 0xF0, 0x80, 0xF0,
		0xF0, 0x80, 0xF0, 0x80, 0x80,
	],
	dream6800: [
		0xE0, 0xA0, 0xA0, 0xA0, 0xE0,
		0x40, 0x40, 0x40, 0x40, 0x40,
		0xE0, 0x20, 0xE0, 0x80, 0xE0,
		0xE0, 0x20, 0xE0, 0x20, 0xE0,
		0x80, 0xA0, 0xA0, 0xE0, 0x20,
		0xE0, 0x80, 0xE0, 0x20, 0xE0,
		0xE0, 0x80, 0xE0, 0xA0, 0xE0,
		0xE0, 0x20, 0x20, 0x20, 0x20,
		0xE0, 0xA0, 0xE0, 0xA0, 0xE0,
		0xE0, 0xA0, 0xE0, 0x20, 0xE0,
		0xE0, 0xA0, 0xE0, 0xA0, 0xA0,
		0xC0, 0xA0, 0xE0, 0xA0, 0xC0,
		0xE0, 0x80, 0x80, 0x80, 0xE0,
		0xC0, 0xA0, 0xA0, 0xA0, 0xC0,
		0xE0, 0x80, 0xE0, 0x80, 0xE0,
		0xE0, 0x80, 0xC0, 0x80, 0x80,
	],
	eti660: [
		0xE0, 0xA0, 0xA0, 0xA0, 0xE0,
		0x20, 0x20, 0x20, 0x20, 0x20,
		0xE0, 0x20, 0xE0, 0x80, 0xE0,
		0xE0, 0x20, 0xE0, 0x20, 0xE0,
		0xA0, 0xA0, 0xE0, 0x20, 0x20,
		0xE0, 0x80, 0xE0, 0x20, 0xE0,
		0xE0, 0x80, 0xE0, 0xA0, 0xE0,
		0xE0, 0x20, 0x20, 0x20, 0x20,
		0xE0, 0xA0, 0xE0, 0xA0, 0xE0,
		0xE0, 0xA0, 0xE0, 0x20, 0xE0,
		0xE0, 0xA0, 0xE0, 0xA0, 0xA0,
		0x80, 0x80, 0xE0, 0xA0, 0xE0,
		0xE0, 0x80, 0x80, 0x80, 0xE0,
		0x20, 0x20, 0xE0, 0xA0, 0xE0,
		0xE0, 0x80, 0xE0, 0x80, 0xE0,
		0xE0, 0x80, 0xC0, 0x80, 0x80,
	],
	fish: [
		0x60, 0xA0, 0xA0, 0xA0, 0xC0,
		0x40, 0xC0, 0x40, 0x40, 0xE0,
		0xC0, 0x20, 0x40, 0x80, 0xE0,
		0xC0, 0x20, 0x40, 0x20, 0xC0,
		0x20, 0xA0, 0xE0, 0x20, 0x20,
		0xE0, 0x80, 0xC0, 0x20, 0xC0,
		0x40, 0x80, 0xC0, 0xA0, 0x40,
		0xE0, 0x20, 0x60, 0x40, 0x40,
		0x40, 0xA0, 0x40, 0xA0, 0x40,
		0x40, 0xA0, 0x60, 0x20, 0x40,
		0x40, 0xA0, 0xE0, 0xA0, 0xA0,
		0xC0, 0xA0, 0xC0, 0xA0, 0xC0,
		0x60, 0x80, 0x80, 0x80, 0x60,
		0xC0, 0xA0, 0xA0, 0xA0, 0xC0,
		0xE0, 0x80, 0xC0, 0x80, 0xE0,
		0xE0, 0x80, 0xC0, 0x80, 0x80,
	],
}
var bigfonts = {
	octo: [
		0xFF, 0xFF, 0xC3, 0xC3, 0xC3, 0xC3, 0xC3, 0xC3, 0xFF, 0xFF, // 0
		0x18, 0x78, 0x78, 0x18, 0x18, 0x18, 0x18, 0x18, 0xFF, 0xFF, // 1
		0xFF, 0xFF, 0x03, 0x03, 0xFF, 0xFF, 0xC0, 0xC0, 0xFF, 0xFF, // 2
		0xFF, 0xFF, 0x03, 0x03, 0xFF, 0xFF, 0x03, 0x03, 0xFF, 0xFF, // 3
		0xC3, 0xC3, 0xC3, 0xC3, 0xFF, 0xFF, 0x03, 0x03, 0x03, 0x03, // 4
		0xFF, 0xFF, 0xC0, 0xC0, 0xFF, 0xFF, 0x03, 0x03, 0xFF, 0xFF, // 5
		0xFF, 0xFF, 0xC0, 0xC0, 0xFF, 0xFF, 0xC3, 0xC3, 0xFF, 0xFF, // 6
		0xFF, 0xFF, 0x03, 0x03, 0x06, 0x0C, 0x18, 0x18, 0x18, 0x18, // 7
		0xFF, 0xFF, 0xC3, 0xC3, 0xFF, 0xFF, 0xC3, 0xC3, 0xFF, 0xFF, // 8
		0xFF, 0xFF, 0xC3, 0xC3, 0xFF, 0xFF, 0x03, 0x03, 0xFF, 0xFF, // 9
		0x7E, 0xFF, 0xC3, 0xC3, 0xC3, 0xFF, 0xFF, 0xC3, 0xC3, 0xC3, // A
		0xFC, 0xFC, 0xC3, 0xC3, 0xFC, 0xFC, 0xC3, 0xC3, 0xFC, 0xFC, // B
		0x3C, 0xFF, 0xC3, 0xC0, 0xC0, 0xC0, 0xC0, 0xC3, 0xFF, 0x3C, // C
		0xFC, 0xFE, 0xC3, 0xC3, 0xC3, 0xC3, 0xC3, 0xC3, 0xFE, 0xFC, // D
		0xFF, 0xFF, 0xC0, 0xC0, 0xFF, 0xFF, 0xC0, 0xC0, 0xFF, 0xFF, // E
		0xFF, 0xFF, 0xC0, 0xC0, 0xFF, 0xFF, 0xC0, 0xC0, 0xC0, 0xC0  // F
	],
	schip: [
		0x3C, 0x7E, 0xE7, 0xC3, 0xC3, 0xC3, 0xC3, 0xE7, 0x7E, 0x3C,
		0x18, 0x38, 0x58, 0x18, 0x18, 0x18, 0x18, 0x18, 0x18, 0x3C,
		0x3E, 0x7F, 0xC3, 0x06, 0x0C, 0x18, 0x30, 0x60, 0xFF, 0xFF,
		0x3C, 0x7E, 0xC3, 0x03, 0x0E, 0x0E, 0x03, 0xC3, 0x7E, 0x3C,
		0x06, 0x0E, 0x1E, 0x36, 0x66, 0xC6, 0xFF, 0xFF, 0x06, 0x06,
		0xFF, 0xFF, 0xC0, 0xC0, 0xFC, 0xFE, 0x03, 0xC3, 0x7E, 0x3C,
		0x3E, 0x7C, 0xE0, 0xC0, 0xFC, 0xFE, 0xC3, 0xC3, 0x7E, 0x3C,
		0xFF, 0xFF, 0x03, 0x06, 0x0C, 0x18, 0x30, 0x60, 0x60, 0x60,
		0x3C, 0x7E, 0xC3, 0xC3, 0x7E, 0x7E, 0xC3, 0xC3, 0x7E, 0x3C,
		0x3C, 0x7E, 0xC3, 0xC3, 0x7F, 0x3F, 0x03, 0x03, 0x3E, 0x7C,
		0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, // no hex chars!
		0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
		0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
		0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
		0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
		0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	],
	fish: [
		0x7C, 0xC6, 0xCE, 0xDE, 0xD6, 0xF6, 0xE6, 0xC6, 0x7C, 0x00, // at most 7x9 pixels!
		0x10, 0x30, 0xF0, 0x30, 0x30, 0x30, 0x30, 0x30, 0xFC, 0x00,
		0x78, 0xCC, 0xCC, 0x0C, 0x18, 0x30, 0x60, 0xCC, 0xFC, 0x00,
		0x78, 0xCC, 0x0C, 0x0C, 0x38, 0x0C, 0x0C, 0xCC, 0x78, 0x00,
		0x0C, 0x1C, 0x3C, 0x6C, 0xCC, 0xFE, 0x0C, 0x0C, 0x1E, 0x00,
		0xFC, 0xC0, 0xC0, 0xC0, 0xF8, 0x0C, 0x0C, 0xCC, 0x78, 0x00,
		0x38, 0x60, 0xC0, 0xC0, 0xF8, 0xCC, 0xCC, 0xCC, 0x78, 0x00,
		0xFE, 0xC6, 0xC6, 0x06, 0x0C, 0x18, 0x30, 0x30, 0x30, 0x00,
		0x78, 0xCC, 0xCC, 0xEC, 0x78, 0xDC, 0xCC, 0xCC, 0x78, 0x00,
		0x7C, 0xC6, 0xC6, 0xC6, 0x7C, 0x18, 0x18, 0x30, 0x70, 0x00,
		0x30, 0x78, 0xCC, 0xCC, 0xCC, 0xFC, 0xCC, 0xCC, 0xCC, 0x00,
		0xFC, 0x66, 0x66, 0x66, 0x7C, 0x66, 0x66, 0x66, 0xFC, 0x00,
		0x3C, 0x66, 0xC6, 0xC0, 0xC0, 0xC0, 0xC6, 0x66, 0x3C, 0x00,
		0xF8, 0x6C, 0x66, 0x66, 0x66, 0x66, 0x66, 0x6C, 0xF8, 0x00,
		0xFE, 0x62, 0x60, 0x64, 0x7C, 0x64, 0x60, 0x62, 0xFE, 0x00,
		0xFE, 0x66, 0x62, 0x64, 0x7C, 0x64, 0x60, 0x60, 0xF0, 0x00,
	],
	none: new Array(16*10).fill(0x00),
}
var fontsets = {
	octo     : { small: smallfonts.octo,      big: bigfonts.octo  },
	vip      : { small: smallfonts.vip,       big: bigfonts.none  },
	dream6800: { small: smallfonts.dream6800, big: bigfonts.none  },
	eti660   : { small: smallfonts.eti660,    big: bigfonts.none  },
	schip    : { small: smallfonts.octo,      big: bigfonts.schip },
	fish     : { small: smallfonts.fish,      big: bigfonts.fish  },
}

////////////////////////////////////
//
//   The Chip8 Interpreter:
//
////////////////////////////////////

function Emulator() {

	// persistent configuration settings
	this.tickrate           = 20;
	this.fillColor          = "#FFCC00";
	this.fillColor2         = "#FF6600";
	this.blendColor         = "#662200";
	this.backgroundColor    = "#996600";
	this.buzzColor          = "#FFAA00";
	this.quietColor         = "#000000";
	this.shiftQuirks        = false;
	this.loadStoreQuirks    = false;
	this.vfOrderQuirks      = false;
	this.clipQuirks         = false;
	this.jumpQuirks         = false;
	this.logicQuirks        = false;
	this.vBlankQuirks       = false;
	this.enableXO           = true;
	this.screenRotation     = 0;//must be 0, 90, 180, or 270
	this.maxSize            = 3584;
	this.touchInputMode     = 'none';
	this.maskFormatOverride = true;
	this.numericFormatStr   = "default";
	this.fontStyle          = 'octo';

	// interpreter state
	this.p  = [[],[]];  // pixels
	this.m  = [];       // memory (bytes)
	this.r  = [];       // return stack
	this.v  = [];       // registers
	this.pc = 0;        // program counter
	this.i  = 0;        // index register
	this.dt = 0;        // delay timer
	this.st = 0;        // sound timer
	this.pitch   = 64;  // audio pitch register
	this.pattern = [];  // audio pattern buffer
	this.hires = false; // are we in SuperChip high res mode?
	this.flags = [];    // semi-persistent hp48 flag vars
	this.plane = 1;     // graphics plane
	this.profile_data = {};

	// control/debug state
	this.keys = {};       // track keys which are pressed
	this.waiting = false; // are we waiting for a keypress?
	this.waitReg = -1;    // destination register of an awaited key
	this.halted = true;
	this.breakpoint = false;
	this.metadata = {};
	this.tickCounter = 0;
	this.linted = false;

	// external interface stubs
	this.exitVector  = function() {}                                                           // fired by 'exit'
	this.importFlags = function() { return [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]; } // load persistent flags
	this.exportFlags = function(flags) {}                                                      // save persistent flags
	this.buzzTimer   = function(timer) {}
	this.buzzBuffer  = function(buffer) {}
	this.buzzPitch   = function(pitch) {}

	this.init = function(rom) {
		// initialise memory with a new array to ensure that it is of the right size and is initiliased to 0
		this.m = this.enableXO ? new Uint8Array(0x10000) : new Uint8Array(0x1000);

		this.p = [[], []];
		if (this.enableXO)
			for(var z = 0; z < 64*128; z++) { this.p[0][z] = 0; this.p[1][z] = 0; }
		else
			for(var z = 0; z < 32*64; z++) { this.p[0][z] = 0; this.p[1][z] = 0; }

		// initialize memory
		var font = fontsets[this.fontStyle];
		for(var z = 0; z < 32*64;            z++) { this.p[0][z] = 0; this.p[1][z] = 0; }
		for(var z = 0; z < font.small.length;z++) { this.m[z] = font.small[z]; }
		for(var z = 0; z < font.big.length;  z++) { this.m[z + font.small.length] = font.big[z]; }
		for(var z = 0; z < rom.rom.length;   z++) { this.m[0x200+z] = rom.rom[z]; }
		for(var z = 0; z < 16;               z++) { this.v[z] = 0; }
		for(var z = 0; z < 16;               z++) { this.pattern[z] = 0; }

		// initialize interpreter state
		this.r = [];
		this.pc = 0x200;
		this.i  = 0;
		this.dt = 0;
		this.st = 0;
		this.pitch = 64;
		this.hires = false;
		this.plane = 1;

		// initialize control/debug state
		this.keys = {};
		this.waiting = false;
		this.waitReg = -1;
		this.halted = false;
		this.breakpoint = false;
		this.stack_breakpoint = -1;
		this.metadata = rom;
		this.tickCounter = 0;
		this.profile_data = {};
	}

	this.writeCarry = function(dest, value, flag) {
		this.v[dest] = (value & 0xFF);
		this.v[0xF] = flag ? 1 : 0;
		if (this.vfOrderQuirks) {
			this.v[dest] = (value & 0xFF);
		}
	}

	this.math = function(x, y, op) {
		// basic arithmetic opcodes
		switch(op) {
			case 0x0: this.v[x]  = this.v[y]; break;
			case 0x1: this.v[x] |= this.v[y]; if (this.logicQuirks) this.v[0xF]=0; break;
			case 0x2: this.v[x] &= this.v[y]; if (this.logicQuirks) this.v[0xF]=0; break;
			case 0x3: this.v[x] ^= this.v[y]; if (this.logicQuirks) this.v[0xF]=0; break;
			case 0x4:
				var t = this.v[x]+this.v[y];
				this.writeCarry(x, t, (t > 0xFF));
				break;
			case 0x5:
				var t = this.v[x]-this.v[y];
				this.writeCarry(x, t, (this.v[x] >= this.v[y]));
				break;
			case 0x7:
				var t = this.v[y]-this.v[x];
				this.writeCarry(x, t, (this.v[y] >= this.v[x]));
				break;
			case 0x6:
				if (this.shiftQuirks) { y = x; }
				var t = this.v[y] >> 1;
				this.writeCarry(x, t, (this.v[y] & 0x1));
				break;
			case 0xE:
				if (this.shiftQuirks) { y = x; }
				var t = this.v[y] << 1;
				this.writeCarry(x, t, ((this.v[y] >> 7) & 0x1));
				break;
			default:
				haltBreakpoint("unknown math opcode "+op.toString(16).toUpperCase());
		}
	}

	this.misc = function(x, rest) {
		// miscellaneous opcodes
		switch(rest) {
			case 0x01: this.plane = (x & 0x3); break;
			case 0x02:
				for(var z = 0; z < 16; z++) this.pattern[z] = this.m[this.i+z];
				this.buzzBuffer(this.pattern); break;
			case 0x07: this.v[x] = this.dt; break;
			case 0x0A: this.waiting = true; this.waitReg = x; break;
			case 0x15: this.dt = this.v[x]; break;
			case 0x18: this.buzzTimer(this.st = this.v[x]); break;
			case 0x1E: this.i = (this.i + this.v[x])&0xFFFF; break;
			case 0x29: this.i = ((this.v[x] & 0xF) * 5); break;
			case 0x30: this.i = ((this.v[x] & 0xF) * 10 + fontsets[this.fontStyle].small.length); break;
			case 0x33:
				this.m[this.i]   = Math.floor(this.v[x]/100)%10;
				this.m[this.i+1] = Math.floor(this.v[x]/10)%10;
				this.m[this.i+2] = this.v[x]%10;
				break;
			case 0x3A: this.buzzPitch(this.pitch = this.v[x]); break;
			case 0x55:
				for(var z = 0; z <= x; z++) { this.m[this.i+z] = this.v[z]; }
				if (!this.loadStoreQuirks) { this.i = (this.i+x+1)&0xFFFF; }
				break;
			case 0x65:
				for(var z = 0; z <= x; z++) { this.v[z] = this.m[this.i+z]; }
				if (!this.loadStoreQuirks) { this.i = (this.i+x+1)&0xFFFF; }
				break;
			case 0x75:
				for(var z = 0; z <= x; z++) { this.flags[z] = this.v[z]; }
				this.exportFlags(this.flags);
				break;
			case 0x85:
				this.flags = this.importFlags();
				if (typeof this.flags == "undefined" || this.flags == null) {
					this.flags = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0];
				}
				for(var z = 0; z <= x; z++) { this.v[z] = 0xFF & this.flags[z]; }
				break;
			default:
				haltBreakpoint("unknown misc opcode "+rest.toString(16).toUpperCase());
		}
	}

	this.sprite = function sprite(x, y, len) {
		this.v[0xF] = 0x0;
		var rowSize = this.hires ? 128 : 64;
		var colSize = this.hires ?  64 : 32;
		var i = this.i;
		for(var layer = 0; layer < 2; layer++) {
			if ((this.plane & (layer+1)) == 0) { continue; }
			if (len == 0) {
				// draw a SuperChip 16x16 sprite
				for(var a = 0; a < 16; a++) {
					for(var b = 0; b < 16; b++) {
						var target = ((x+b) % rowSize) + ((y+a) % colSize)*rowSize;
						var source = ((this.m[i+(a*2)+(b > 7 ? 1:0)] >> (7-(b%8))) & 0x1) != 0;
						if (this.clipQuirks) {
							if ((x%rowSize)+b>=rowSize || (y%colSize)+a>=colSize) { source = 0; }
						}
						if (!source) { continue; }
						if (this.p[layer][target]) { this.p[layer][target] = 0; this.v[0xF] = 0x1; }
						else { this.p[layer][target] = 1; }
					}
				}
				i += 32;
			}
			else {
				// draw a Chip8 8xN sprite
				for(var a = 0; a < len; a++) {
					for(var b = 0; b < 8; b++) {
						var target = ((x+b) % rowSize) + ((y+a) % colSize)*rowSize;
						var source = ((this.m[i+a] >> (7-b)) & 0x1) != 0;
						if (this.clipQuirks) {
							if ((x%rowSize)+b>=rowSize || (y%colSize)+a>=colSize) { source = 0; }
						}
						if (!source) { continue; }
						if (this.p[layer][target]) { this.p[layer][target] = 0; this.v[0xF] = 0x1; }
						else { this.p[layer][target] = 1; }
					}
				}
				i += len;
			}
		}
	}

	this.call = function(nnn) {
		if (this.r.length >= 12) {
			haltBreakpoint("call stack overflow.");
		}
		this.r.push(this.pc);
		this.pc = nnn
	}

	this.jump0 = function(nnn) {
		if (this.jumpQuirks) { this.pc = nnn + this.v[(nnn >> 8)&0xF];  }
		else                 { this.pc = nnn + this.v[0]; }
	}

	this.machine = function(nnn) {
		if (nnn == 0x000) { this.halted = true; return; }
		haltBreakpoint("machine code is not supported.");
	}

	this.skip = function() {
		var op = (this.m[this.pc  ] << 8) | this.m[this.pc+1];
		this.pc += (op == 0xF000) ? 4 : 2;
	}

	this.opcode = function() {
		// Increment profilining data
		this.profile_data[this.pc] = (this.profile_data[this.pc] || 0) + 1;

		// decode the current opcode
		var op  = (this.m[this.pc  ] << 8) | this.m[this.pc+1];
		var o   = (this.m[this.pc  ] >> 4) & 0x00F;
		var x   = (this.m[this.pc  ]     ) & 0x00F;
		var y   = (this.m[this.pc+1] >> 4) & 0x00F;
		var n   = (this.m[this.pc+1]     ) & 0x00F;
		var nn  = (this.m[this.pc+1]     ) & 0x0FF;
		var nnn = op & 0xFFF;
		this.pc += 2;

		// execute a simple opcode
		if (op == 0x00E0) {
			// clear
			for(var layer = 0; layer < 2; layer++) {
				if ((this.plane & (layer+1)) == 0) { continue; }
				for(var z = 0; z < this.p[layer].length; z++) {
					this.p[layer][z] = 0;
				}
			}
			return;
		}
		if (op == 0x00EE) {
			// return
			this.pc = this.r.pop();
			return;
		}
		if ((op & 0xF0FF) == 0xE09E) {
			// if -key
			if (Object.keys(keymap[this.v[x]]||{}).some(x => x in this.keys)) { this.skip(); }
			return;
		}
		if ((op & 0xF0FF) == 0xE0A1) {
			// if key
			if (!Object.keys(keymap[this.v[x]]||{}).some(x => x in this.keys)) { this.skip(); }
			return;
		}
		if ((op & 0xFFF0) == 0x00C0) {
			// scroll down n pixels
			var rowSize = this.hires ? 128 : 64;
			for(var layer = 0; layer < 2; layer++) {
				if ((this.plane & (layer+1)) == 0) { continue; }
				for(var z = this.p[layer].length - 1; z >= 0; z--) {
					this.p[layer][z] = (z >= rowSize * n) ? this.p[layer][z - (rowSize * n)] : 0;
				}
			}
			return;
		}
		if ((op & 0xFFF0) == 0x00D0) {
			// scroll up n pixels
			var rowSize = this.hires ? 128 : 64;
			for(var layer = 0; layer < 2; layer++) {
				if ((this.plane & (layer+1)) == 0) { continue; }
				for(var z = 0; z < this.p[layer].length; z++) {
					this.p[layer][z] = (z < (this.p[layer].length - rowSize * n)) ? this.p[layer][z + (rowSize * n)] : 0;
				}
			}
			return;
		}
		if (op == 0x00FB) {
			// scroll right 4 pixels
			var rowSize = this.hires ? 128 : 64;
			for(var layer = 0; layer < 2; layer++) {
				if ((this.plane & (layer+1)) == 0) { continue; }
				for(var a = 0; a < this.p[layer].length; a += rowSize) {
					for(var b = rowSize-1; b >= 0; b--) {
						this.p[layer][a + b] = (b > 3) ? this.p[layer][a + b - 4] : 0;
					}
				}
			}
			return;
		}
		if (op == 0x00FC) {
			// scroll left 4 pixels
			var rowSize = this.hires ? 128 : 64;
			for(var layer = 0; layer < 2; layer++) {
				if ((this.plane & (layer+1)) == 0) { continue; }
				for(var a = 0; a < this.p[layer].length; a += rowSize) {
					for(var b = 0; b < rowSize; b++) {
						this.p[layer][a + b] = (b < rowSize - 4) ? this.p[layer][a + b + 4] : 0;
					}
				}
			}
			return;
		}
		if (op == 0x00FD) {
			// exit
			this.halted = true;
			this.exitVector();
			return;
		}
		if (op == 0x00FE) {
			// lores
			this.hires = false;
			this.p = [[], []];
			for(var z = 0; z < 32*64; z++) { this.p[0][z] = 0; this.p[1][z] = 0; }
			return;
		}
		if (op == 0x00FF) {
			// hires
			this.hires = true;
			this.p = [[], []];
			for(var z = 0; z < 64*128; z++) { this.p[0][z] = 0; this.p[1][z] = 0; }
			return;
		}
		if (op == 0xF000) {
			// long memory reference
			this.i = ((this.m[this.pc] << 8) | (this.m[this.pc+1])) & 0xFFFF;
			this.pc += 2;
			return;
		}

		if (o == 0x5 && n != 0) {
			if (n == 2) {
				// save range
				var dist = Math.abs(x - y);
				if (x < y) { for(var z = 0; z <= dist; z++) { this.m[this.i+z] = this.v[x+z]; }}
				else       { for(var z = 0; z <= dist; z++) { this.m[this.i+z] = this.v[x-z]; }}
				return;
			}
			else if (n == 3) {
				// load range
				var dist = Math.abs(x - y);
				if (x < y) { for(var z = 0; z <= dist; z++) { this.v[x+z] = this.m[this.i+z]; }}
				else       { for(var z = 0; z <= dist; z++) { this.v[x-z] = this.m[this.i+z]; }}
				return;
			}
			else {
				haltBreakpoint("unknown opcode "+op.toString(16).toUpperCase());
			}
		}
		if (o == 0x9 && n != 0) {
			haltBreakpoint("unknown opcode "+op.toString(16).toUpperCase());
		}

		// dispatch complex opcodes
		switch(o) {
			case 0x0: this.machine(nnn);                            break;
			case 0x1: this.pc = nnn;                                break;
			case 0x2: this.call(nnn);                               break;
			case 0x3: if (this.v[x] == nn)        { this.skip(); }  break;
			case 0x4: if (this.v[x] != nn)        { this.skip(); }  break;
			case 0x5: if (this.v[x] == this.v[y]) { this.skip(); }  break;
			case 0x6: this.v[x] = nn;                               break;
			case 0x7: this.v[x] = (this.v[x] + nn) & 0xFF;          break;
			case 0x8: this.math(x, y, n);                           break;
			case 0x9: if (this.v[x] != this.v[y]) { this.skip(); }  break;
			case 0xA: this.i = nnn;                                 break;
			case 0xB: this.jump0(nnn);                              break;
			case 0xC: this.v[x] = (Math.random()*256)&nn;           break;
			case 0xD: this.sprite(this.v[x], this.v[y], n);         break;
			case 0xF: this.misc(x, nn);                             break;
			default: haltBreakpoint("unknown opcode "+o.toString(16).toUpperCase());
		}
	}

	this.tick = function() {
		if (this.halted) { return; }
		this.tickCounter++;
		try {
			this.opcode();
		}
		catch(err) {
			console.log("halted: " + err);
			this.halted = true;
		}
	}
}
</script>
<script>"use strict";

////////////////////////////////////
//
//   Emulator Execution
//
////////////////////////////////////

//must be set > 0
var scaleFactor = 5;
//dom id for canvas element
var renderTarget = "target";

const optionFlags = [
	"tickrate",
	"fillColor",
	"fillColor2",
	"blendColor",
	"backgroundColor",
	"buzzColor",
	"quietColor",
	"shiftQuirks",
	"loadStoreQuirks",
	"vfOrderQuirks",
	"clipQuirks",
	"vBlankQuirks",
	"jumpQuirks",
	"screenRotation",
	"maxSize",
	"touchInputMode",
	"logicQuirks",
	"fontStyle",
]
function unpackOptions(emulator, options) {
	optionFlags.forEach(x => { if (x in options) emulator[x] = options[x] })
	if (options["enableXO"]) emulator.maxSize = 65024 // legacy option
}
function packOptions(emulator) {
	const r = {}
	optionFlags.forEach(x => r[x] = emulator[x])
	return r
}

function setRenderTarget(scale, canvas) {
	scaleFactor = scale;
	renderTarget = canvas;
	var c = document.getElementById(canvas);

	// Remove any existing previous delta frame so first frame is always drawn:
	c.last = undefined;

	var w  = scaleFactor * 128;
	var h  = scaleFactor *  64;

	if (emulator.screenRotation == 90 || emulator.screenRotation == 270) {
		c.width  = h;
		c.height = w;
	}
	else {
		c.width  = w;
		c.height = h;
	}
}

function setTransform(emulator, g) {
	g.setTransform(1, 0, 0, 1, 0, 0);
	var x = scaleFactor * 128;
	var y = scaleFactor *  64;
	switch(emulator.screenRotation) {
		case 90:
			g.rotate(0.5 * Math.PI);
			g.translate(0, -y);
			break;
		case 180:
			g.rotate(1.0 * Math.PI);
			g.translate(-x, -y);
			break;
		case 270:
			g.rotate(1.5 * Math.PI);
			g.translate(-x, 0);
			break;
		default:
			console.assert(emulator.screenRotation === 0, 'Screen rotation not set to 0, 90, 180, or 270. Treating as 0.')
	}
}


function arrayEqual(a, b) {
	var length = a.length;
	if (length !== b.length) { return false; }
	for (var i = 0; i < length; i++) {
		if (a[i] !== b[i]) { return false; }
	}
	return true;
}

function getColor(id) {
	switch(id) {
		case 0: return emulator.backgroundColor;
		case 1: return emulator.fillColor;
		case 2: return emulator.fillColor2;
		case 3: return emulator.blendColor;
	}
	throw "invalid color: " + id;
}

function renderDisplay(emulator) {
	var c = document.getElementById(renderTarget);

	// Canvas rendering can be expensive. Exit out early if nothing has changed.
	var colors = [emulator.backgroundColor, emulator.fillColor, emulator.fillColor2, emulator.blendColor];
	if (c.last !== undefined) {
		if (arrayEqual(c.last.p[0], emulator.p[0]) && arrayEqual(c.last.p[1], emulator.p[1])
				&& arrayEqual(c.last.colors, colors)) {
			return;
		}
		if (c.last.hires !== emulator.hires)
			c.last = undefined;  // full redraw when switching resolution
	}
	var g = c.getContext("2d");
	setTransform(emulator, g);
	var w      = emulator.hires ? 128         : 64;
	var h      = emulator.hires ? 64          : 32;
	var size   = emulator.hires ? scaleFactor : scaleFactor*2;
	var lastPixels = c.last !== undefined? c.last.p: [[], []]

	g.scale(size, size)
	var z = 0;
	for(var y = 0; y < h; ++y) {
		for(var x = 0; x < w; ++x, ++z) {
			var oldColorIdx = lastPixels[0][z] + (lastPixels[1][z] << 1);
			var colorIdx = emulator.p[0][z] + (emulator.p[1][z] << 1);
			if (oldColorIdx !== colorIdx) {
				g.fillStyle = getColor(colorIdx);
				g.fillRect(x, y, 1, 1);
			}
		}
	}
	g.scale(1, 1) //restore scale to 1,1 just in case

	c.last = {
		colors: colors,
		p: [emulator.p[0].slice(), emulator.p[1].slice()],
		hires: emulator.hires,
	};
}

////////////////////////////////////
//
//   Audio Playback
//
////////////////////////////////////

var audio;
var audioNode;
var audioSource;
var audioData;
var XOAudio;

var AudioBuffer = function(buffer, duration) {
	if (!(this instanceof AudioBuffer)) {
		return new AudioBuffer(buffer, duration);
	}

	this.pointer = 0;
	this.buffer = buffer;
	this.duration = duration;
}

AudioBuffer.prototype.write = function(buffer, index, size) {
	size = Math.max(0, Math.min(size, this.duration))
	if (!size) { return size; }

	this.duration -= size;
	var bufferSize = this.buffer.length;
	var end = index + size;

	for(var i = index; i < end; ++i) {
		buffer[i] = this.buffer[this.pointer++];
		this.pointer %= bufferSize;
	}

	return size;
}

AudioBuffer.prototype.dequeue = function(duration) {
	this.duration -= duration;
}

var FREQ = 4000;
var PITCH_BIAS = 64;

function audioEnable() {
	// this will only work if called directly from a user-generated input handler:
	if (audio && audio.state == 'suspended') audio.resume()
}

function audioSetup(emulator) {
	if (!audio) {
		if (typeof AudioContext !== 'undefined') {
			audio = new AudioContext();
		}
		else if (typeof webkitAudioContext !== 'undefined') {
			audio = new webkitAudioContext();
		}
	}
	audioEnable()
	if (audio && !audioNode) {
		const bufferSize = // set bufferSize according to environment's samplerate
		audio.sampleRate <  64000 ? 2048 : // for 48000hz or 44100hz or less
		audio.sampleRate < 128000 ? 4096 : 8192; // for 96000hz or more
		audioNode = audio.createScriptProcessor(bufferSize, 1, 1);
		audioNode.gain = audio.createGain();
		audioNode.gain.gain.value = VOLUME ;
		audioNode.onaudioprocess = function(audioProcessingEvent) {
			var outputBuffer = audioProcessingEvent.outputBuffer;
			var outputData = outputBuffer.getChannelData(0);
			var samples_n = outputBuffer.length;
			var index = 0;
			while(audioData.length && index < samples_n) {
				var size = samples_n - index;
				var written = audioData[0].write(outputData, index, size);
				index += written;
				if (written < size) {
					audioData.shift();
				}
			}

			while(index < samples_n) {
				outputData[index++] = 0;
			}
			//the last one can be long sound with high value of buzzer, so always keep it
			if (audioData.length > 1) {
				var audioDataSize = 0;
				var audioBufferSize = audioNode.bufferSize;
				audioData.forEach(function(buffer) { audioDataSize += buffer.duration; })
				while(audioDataSize > audioBufferSize && audioData.length > 1) {
					audioDataSize -= audioData.shift().duration;
				}
			}
		}
		audioData = [];
		audioNode.connect(audioNode.gain);
		audioNode.gain.connect(audio.destination);

		XOAudio = new AudioControl();
		emulator.buzzTimer  = _ => XOAudio.setTimer(_);
		emulator.buzzBuffer = _ => XOAudio.setBuffer(_);
		emulator.buzzPitch  = _ => XOAudio.setPitch(_);
	}
	return audio && audioNode
}

function stopAudio() {
	if (!audio) { return; }
	if (audioNode) {
		audioNode.disconnect();
		audioNode = null;
	}
	audioData = [];
}

var VOLUME = 0.25;

function playPattern(soundLength,buffer,pitch=PITCH_BIAS,
	sampleState={ pos: 0 }) {
	if (!audio) { return; }
	audioEnable()

	var freq = FREQ*2**((pitch-PITCH_BIAS)/48);
	var samples = Math.ceil(audio.sampleRate * soundLength);
	
	var bufflen = buffer.length * 8;
	var audioBuffer = new Float32Array(samples);

	var step = freq / audio.sampleRate;
	var pos = sampleState.pos;

	// keep super-sampling consistent with audio sample rate
	var quality = Math.ceil( 384000 / audio.sampleRate );
	var lowPassAlpha = getLowPassAlpha(audio.sampleRate * quality);
	
	for(var i = 0, il = samples; i < il; i++) {
		for (var j = 0; j < quality; ++j) {
			var cell = pos >> 3, shift = pos & 7 ^ 7;
			var value = getLowPassFilteredValue(lowPassAlpha, buffer[cell] >> shift & 1);
			pos = ( pos + step/quality ) % bufflen;
		}
		audioBuffer[i] = value;
	}

	audioData.push(new AudioBuffer(audioBuffer, samples));
	
	return { pos };
}

const silentPattern = new Array(64).fill(0);

function AudioControl(){
	this.state = { pos: 0 };
	this.reset = true;
	this.buffer = [];

	this.timer = 0;
	this.pitch = PITCH_BIAS;

	this.refresh = _ => {
		if (this.reset) this.state.pos = 0; this.reset = false;
		if (this.timer == 0) playPattern(_,silentPattern);
		else this.state = playPattern(_,this.buffer,this.pitch,this.state);
		if((this.timer -= this.timer>0) == 0) this.reset = true;
		while(audioData.length > 8) audioData.shift();
	}
	this.setTimer = (timer) => {
		if(timer == 0) this.reset = true;
		this.timer = timer;
	}
	this.setBuffer = buffer => this.buffer = buffer;
	this.setPitch = pitch => this.pitch = pitch;
}

function escapeHtml(str) {
    var div = document.createElement('div');
    div.appendChild(document.createTextNode(str));
    return div.innerHTML;
}

// Should be a good way below the Nyquist limit of 22.05 kHz.
const cutoffFrequency = 18000;

// How many filters to put in sequence.
const lowPassFilterSteps = 4;

// Each filter is an exponential filter, which mimics a simple analog RC filter.
// We need multiple of them in series to get decent attenuation near the stop band.

const lowPassBuffer = new Array(lowPassFilterSteps + 1).fill(0);

function getLowPassAlpha(samplingFrequency) {
	const c = Math.cos(2 * Math.PI * cutoffFrequency / samplingFrequency);
	return c - 1 + Math.sqrt(c * c - 4 * c + 3);
}

function getLowPassFilteredValue(alpha, targetValue) {
	lowPassBuffer[0] = targetValue;
	for (let i = 1; i < lowPassBuffer.length; ++i) {
		lowPassBuffer[i] += (lowPassBuffer[i - 1] - lowPassBuffer[i]) * alpha;
	}
	return lowPassBuffer[lowPassBuffer.length - 1];
}
</script>
<script>/**
* Adaptive Input
**/

const ael = (element, event, listener) => element.addEventListener   (event, listener, { passive:false })
const rel = (element, event, listener) => element.removeEventListener(event, listener, { passive:false })
const pd  = event => (event.preventDefault(),event.stopPropagation())

function addPointer(element,start,move,end){
  function mouseToTouch(f){
    return event=>{
      const to={indentifier:1,target:element,clientX:event.clientX,clientY:event.clientY}
      f({changedTouches:[to],touches:[to],preventDefault:_=>{},stopPropagation:_=>{}})
    }
  }
  let mousedown=false
  const events={
    touchstart: start,
    touchmove:  move,
    touchend:   end,
    mousedown:  mouseToTouch(e=>{mousedown=true;start(e)}),
    mousemove:  mouseToTouch(e=>{if(mousedown)move(e)}),
    mouseup:    mouseToTouch(e=>{mousedown=false;end(e)}),
    mouseout:   mouseToTouch(e=>{mousedown=false;end(e)}),
  }
  Object.keys(events).forEach(k=>ael(element,k,events[k]))
  return _=>{Object.keys(events).forEach(k=>rel(element,k,events[k]))}
}

const VIP_HEX  = '123c456d789ea0bf'.split('')
const VIP_KEYS = VIP_HEX.map(x => parseInt(x,16))

const GAMEPAD_STYLES = `
.gamepad{
  position:absolute;
  top:10%;
  left:0px;
  width:100%;
  height:90%;
  opacity:0.3;
  user-select: none;
  -webkit-user-select: none;
}
.gamepad .dpad{
  position:absolute;
  bottom: 50px;
  left:   50px;
  width:  250px;
  height: 250px;
  background: gray;
  border-radius: 50%;
  overflow:hidden;
}
.gamepad .stick{
  display:none;
  position:absolute;
  border-radius: 50%;
  width:100px;
  height:100px;
  margin-left:-50px;
  margin-top:-50px;
}
.gamepad .buttons{
  position:absolute;
  bottom: 50px;
  right:  50px;
  width:  250px;
  height: 250px;
}
.gamepad .gamebutton{
  position:absolute;
  width:  125px;
  height: 125px;
  background:gray;
  border-radius:50%;
  overflow:hidden;
  line-height: 125px;
  font-size:50px;
  font-weight:bold;
  color:darkgray;
  text-align:center;
}
.gamepad .dpad.active .stick {display:block;background:#444}
.gamepad .gamebutton.active{background:#444;}
.gamepad .gamebutton.b{left:0;bottom:0;}
.gamepad .gamebutton.a{right:0;top:0;}
`
const VIP_STYLES = `
.vip-pad {display:flex;flex-direction:column;align-items:center;z-index:2000;}
.vip-pad .keypad {display:flex;flex-direction:column;margin-top:10px;}
.vip-pad .keypad>div {display:flex;flex-direction:row;}
.vip-pad .keypad>div>div {
  -webkit-user-select: none;
  user-select: none;
  background:gray;
  width: 100px;
  height: 51px;
  display: flex;
  justify-content: center;
  align-items: center;
  margin: 1px;
}
.vip-pad .keypad>div>div:active,
.vip-pad .keypad>div>div.active {background:black; border:1px solid white;margin:0px;}
`

const INPUT_MODULES = {
  /**
  * An invisible set of gesture recognizers,
  * giving directional input and an action for taps.
  **/
  swipe: {
    install: (screen,up,down,options) => {

      let vdirs      = []
      let direction  = { i:null, sx:0, sy:0, lx:0, ly:0 }
      let action1    = {}
      let taptimeout = null

      const updateStick = _ => {
        // find the relative position of the stick to its starting point
        const cx = direction.lx - direction.sx
        const cy = direction.ly - direction.sy

        // update the virtual direction buttons
        let t = []
        const DEAD_ZONE = 30
        if (Math.abs(cx) > DEAD_ZONE) t.push(cx < 0 ? options.left : options.right)
        if (Math.abs(cy) > DEAD_ZONE) t.push(cy < 0 ? options.up   : options.down)
        vdirs.forEach(x => (t    .indexOf(x)<0) && up  (x)) // clear keys no longer held
        t    .forEach(x => (vdirs.indexOf(x)<0) && down(x)) // push keys that were not held before
        vdirs = t
      }
      const tapDown= i => {
        if (Object.keys(action1).length == 0) down(options.action1)
        action1[i] = true
        if (i == direction.i) { direction = { i:null, sx:0, sy:0, lx:0, ly:0 } }
        taptimeout = null
      }
      const start = e => {
        const t = e.touches[0]
        const i = t.identifier
        // a single-touch is either directional or a tap...
        if (direction.i != null) {
          tapDown(i)
        }
        else {
          direction.i  = i
          direction.sx = t.clientX
          direction.sy = t.clientY
          direction.lx = t.clientX
          direction.ly = t.clientY
          taptimeout = setTimeout(_ => tapDown(i), 100)
        }
        updateStick(),pd(e)
      }
      const move = e => {
        for(let z = 0; z < e.changedTouches.length; z++) {
          const t = e.changedTouches[z]
          const i = t.identifier
          if (i == direction.i) {
            if (taptimeout != null) { clearTimeout(taptimeout); taptimeout = null }
            direction.lx = t.clientX
            direction.ly = t.clientY
          }
        }
        updateStick(),pd(e)
      }
      const end = e => {
        let r1 = false
        for(let z = 0; z < e.changedTouches.length; z++) {
          const t = e.changedTouches[z]
          const i = t.identifier
          if (i == direction.i) {
            if (taptimeout != null) {
              // cancel a short tap
              clearTimeout(taptimeout); taptimeout = null
              down(options.action1)
              setTimeout(_ => up(options.action1), 50)
            }
            direction = { i:null, sx:0, sy:0, lx:0, ly:0 }
          }
          if (i in action1) {
            delete action1[i]
            r1=true
          }
        }
        if (r1 && Object.keys(action1).length == 0) up(options.action1)
        updateStick(),pd(e)
      }
      ael(screen, 'touchstart', start)
      ael(screen, 'touchmove',  move)
      ael(screen, 'touchend',   end)
      screen.uninstallSwipe = _ => {
        rel(screen, 'touchstart', start)
        rel(screen, 'touchmove',  move)
        rel(screen, 'touchend',   end)
      }
    },
    remove: (screen) => {
      screen.uninstallSwipe()
      delete screen.uninstallSwipe
    }
  },

  /**
  * A virtual gamepad overlay with two remappable action keys.
  **/
  gamepad: {
    install: (screen,up,down,options) => {
      // build the UI
      if (document.querySelector('.gamepad')) return
      const root = document.createElement('div')
      root.classList.add('gamepad')
      root.innerHTML = `
      <div class='dpad'><div class='stick'></div></div>
      <div class='buttons'><div class='gamebutton b'>B</div><div class='gamebutton a'>A</div></div>
      <style>${GAMEPAD_STYLES}</style>`
      screen.parentElement.append(root)

      let vdirs      = []
      let directions = {}
      let buttons    = {}
      const pad   = document.querySelector('.gamepad .dpad')
      const stick = document.querySelector('.gamepad .dpad .stick')
      const a     = document.querySelector('.gamepad .gamebutton.a')
      const b     = document.querySelector('.gamepad .gamebutton.b')

      const updateStick = _ => {
        // find centroid of d-pad touchpoints ({0,0} if no touchpoints)
        const touches = Object.values(directions)
        let cx = 0, cy = 0, r = pad.getBoundingClientRect(), sr = stick.getBoundingClientRect()
        touches.forEach(t => (cx+=t.x, cy+=t.y))
        cx /= touches.length,         cy /= touches.length
        cx -= (r.left + (r.width/2)), cy -= (r.top + (r.height/2))

        // position the virtual stick, clamped within dpad
        const ca = Math.atan2(cy, cx)
        const cd = Math.min(Math.sqrt(cx*cx + cy*cy), (r.width/2)-(sr.width/2))
        stick.style.left = ((Math.cos(ca)*cd)+(r.width /2)|0)+'px'
        stick.style.top  = ((Math.sin(ca)*cd)+(r.height/2)|0)+'px'

        // update the virtual direction buttons
        let t = []
        const DEAD_ZONE = 30
        if (Math.abs(cx) > DEAD_ZONE) t.push(cx < 0 ? options.left : options.right)
        if (Math.abs(cy) > DEAD_ZONE) t.push(cy < 0 ? options.up   : options.down)
        vdirs.forEach(x => (t    .indexOf(x)<0) && up  (x)) // clear keys no longer held
        t    .forEach(x => (vdirs.indexOf(x)<0) && down(x)) // push keys that were not held before
        vdirs = t
      }

      const start = e => {
        for(let z = 0; z<e.touches.length; z++) {
          const t = e.touches[z]
          const i = t.identifier
          if (t.target == a) {
            t.target.classList.add('active')
            buttons[i]=options.action1
            down(options.action1)
          }
          if (t.target == b) {
            t.target.classList.add('active')
            buttons[i]=options.action2
            down(options.action2)
          }
          if (t.target == pad) {
            t.target.classList.add('active')
            directions[i]={x:t.clientX, y:t.clientY}
          }
        }
        updateStick(),pd(e)
      }
      const move = e => {
        for(let z = 0; z<e.changedTouches.length; z++) {
          const t = e.changedTouches[z]
          const i = t.identifier
          if (i in directions) directions[i]={x:t.clientX, y:t.clientY}
        }
        updateStick(),pd(e)
      }
      const end = e => {
        for(let z = 0; z<e.changedTouches.length; z++) {
          const t = e.changedTouches[z]
          const i = t.identifier
          if (i in buttons) {
            t.target.classList.remove('active')
            up(buttons[i])
            delete buttons[i]
          }
          if (i in directions) {
            t.target.classList.remove('active')
            delete directions[i]
          }
        }
        updateStick(),pd(e)
      }

      ael(a,   'touchstart', start)
      ael(a,   'touchend',   end  )
      ael(b,   'touchstart', start)
      ael(b,   'touchend',   end  )
      ael(pad, 'touchstart', start)
      ael(pad, 'touchmove',  move )
      ael(pad, 'touchend',   end  )
    },
    remove: (screen) => {
      document.querySelector('.gamepad').remove()
    },
  },

  /**
  * Treat the entire screen, or a centered square region, as invisible buttons,
  * mapped out in the order of the VIP hex keypad.
  **/
  seg16: {
    install: (screen,up,down,options) => {
      const tmap = {}
      const pointToKey = touch => {
        // poll this for each point, as it may vary over time,
        // and experimentally it's never right initially...
        const r = screen.getBoundingClientRect()
        if (options.mode == 'center') {
          if (r.width > r.height) { r.x += (r.width - r.height)/2; r.width = r.height }
          else                    { r.y += (r.height - r.width)/2; r.height = r.width }
        }
        const x = touch.clientX - r.x
        const y = touch.clientY - r.y
        if (x < 0 || x > r.width || y < 0 || y > r.height) return null
        const tx = Math.floor(x / (r.width /4))
        const ty = Math.floor(y / (r.height/4))
        return VIP_KEYS[tx + (4 * ty)]
      }
      const start = e => {
        for(let z=0; z<e.touches.length; z++) {
          const i = e.touches[z].identifier
          const k = pointToKey(e.touches[z])
          if (k != null) down(k)
          tmap[i]=k
        }
        pd(e)
      }
      const move = e => {
        for(let z=0; z<e.touches.length; z++) {
          const i = e.touches[z].identifier
          const k = pointToKey(e.touches[z])
          if (tmap[i] == k) continue       // same cell, nothing to do.
          if (tmap[i] != null) up(tmap[i]) // release old key, if any
          if (k != null)       down(k)     // press new key, if any
          tmap[i]=k
        }
        pd(e)
      }
      const end = e => {
        for(let z=0; z<e.changedTouches.length; z++) {
          const i = e.changedTouches[z].identifier
          const k = pointToKey(e.changedTouches[z])
          if (tmap[i] != null) up(tmap[i])
          tmap[i]=null
        }
        pd(e)
      }
      screen.uninstallSeg16=addPointer(screen,start,move,end)
    },
    remove:  (screen) => {
      screen.uninstallSeg16()
      delete screen.uninstallSeg16
    },
  },

  /**
  * Provide a visible 4x4 representation of the VIP hex keypad.
  **/
  vip: {
    install: (screen,up,down,options) => {
      if (document.querySelector('.vip-pad')) return
      const root = document.createElement('div')
      root.classList.add('vip-pad')
      root.innerHTML = `<div class='keypad'>
        ${[0,1,2,3].map(r=>`<div>${[0,1,2,3].map(c=>`<div>${VIP_HEX[c+(r*4)].toUpperCase()}</div>`).join('')}</div>`).join('')}
      </div>
      <style>${VIP_STYLES}</style>`
      if (screen.parentElement == document.body) { screen.parentElement.append(root) }
      else { screen.parentElement.parentElement.append(root) }
      const buttons = []
      document.querySelectorAll('.vip-pad .keypad>div>div').forEach(x=>buttons.push(x)) // make an actual Array
      const held = {}
      const start = e => {
        for(let z=0; z<e.touches.length; z++) {
          const t = e.touches[z]
          const i = t.identifier
          const k = VIP_KEYS[buttons.indexOf(t.target)]
          t.target.classList.add('active')
          down(k)
          held[i]=k
        }
        pd(e)
      }
      const end = e => {
        for(let z = 0; z<e.changedTouches.length; z++) {
          const t = e.changedTouches[z]
          const i = t.identifier
          if (held[i] != undefined) { up(held[i]); delete held[i] }
          t.target.classList.remove('active')
        }
        pd(e)
      }
      buttons.forEach(b => addPointer(b,start,_=>{},end))
    },
    remove:  (screen) => {
      document.querySelector('.vip-pad').remove()
    },
  },
}

let adaptiveControlsInstalled = null

function injectAdaptiveControls(type, screen, keyup, keydown) {
  let options = {
    up:      5,
    down:    8,
    left:    7,
    right:   9,
    action1: 6,
    action2: 4,
    mode:    'center', // or 'fill', used by seg16
  }
  const lookup = vk => Object.keys(keymap[vk])[0]
  const install = _ => {
    rel(screen, 'touchstart', install)
    rel(screen, 'mousedown',  install)
    adaptiveControlsInstalled = type
    INPUT_MODULES[type].install(
      screen,
      key => keyup  ({ key:lookup(key), preventDefault:_=>_ }),
      key => keydown({ key:lookup(key), preventDefault:_=>_ }),
      options
    )
  }
  // uninstall anything that's already there:
  rel(screen, 'touchstart', install)
  rel(screen, 'mousedown' , install)
  if (adaptiveControlsInstalled) INPUT_MODULES[adaptiveControlsInstalled].remove(screen)

  if (type == 'none') return
  if (type == 'seg16fill') { type='seg16'; options.mode='fill' }
  if (type in {seg16:1,seg16fill:1}){
    install()
  }
  else {
    // defer installing adaptive input until we actually see
    // an input event from the user:
    ael(screen, 'touchstart', install)
    ael(screen, 'mousedown',  install)
  }
}
</script>
<body><canvas id='target' width=512 height=256></canvas></body>
<style>body{margin:0px;display:flex;flex-direction:column;align-items:center;justify-content:center;height:100%;}</style>
<script>
const emulator = new Emulator()
unpackOptions(emulator, data.options)
setRenderTarget(data.options.displayScale || 4, 'target')
emulator.init({rom:data.rom})
emulator.importFlags = _ => getPref('octoFlagRegisters')
emulator.exportFlags = f => setPref('octoFlagRegisters',f)
emulator.buzzTrigger = (ticks,rest)=> playPattern(ticks, emulator.pattern, rest)
const kd = e=>{
	if (!audio) audioSetup(emulator)
	if (!(e.key in emulator.keys)) emulator.keys[e.key]=true
	e.preventDefault()
}
const ku = e=>{
	if (e.key in emulator.keys) delete emulator.keys[e.key]
	if (!emulator.waiting) return
	const kindex = keymapInverse[e.key]
	if (kindex != undefined) {
		emulator.waiting = false
		emulator.v[emulator.waitReg] = kindex
	}
	e.preventDefault()
}
window.addEventListener('keydown',kd,false)
window.addEventListener('keyup',ku,false)
const frameTime=1000/60
let last=Date.now(), origin=last+frameTime/2
intervalHandle=setInterval(_=>{
	last+=(Date.now()-last)
	if (emulator.halted) return
	for(var k=0; origin<last-frameTime&&k<2; origin+=frameTime,k++){
		for(var z=0;(z<emulator.tickrate) && (!emulator.waiting); z++){
			if (emulator.vBlankQuirks &&((emulator.m[emulator.pc] & 0xF0)==0xD0)) z=emulator.tickrate
			emulator.tick()
		}
		if (emulator.dt > 0) emulator.dt--
		if (emulator.st > 0) emulator.st--
		XOAudio && XOAudio.refresh(frameTime/1000)
	}
	renderDisplay(emulator)
	document.body.style.backgroundColor = emulator.st?emulator.buzzColor:emulator.quietColor
}, frameTime)
injectAdaptiveControls(emulator.touchInputMode,document.getElementById('target'),ku,kd)
</script>
